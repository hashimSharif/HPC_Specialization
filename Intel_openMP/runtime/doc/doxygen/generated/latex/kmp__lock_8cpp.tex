\hypertarget{kmp__lock_8cpp}{\section{kmp\-\_\-lock.\-cpp File Reference}
\label{kmp__lock_8cpp}\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}}
}
{\ttfamily \#include $<$stddef.\-h$>$}\\*
{\ttfamily \#include \char`\"{}kmp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}kmp\-\_\-itt.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}kmp\-\_\-i18n.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}kmp\-\_\-lock.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}kmp\-\_\-io.\-h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{kmp__lock_8cpp_a990ed2e70e7d9ab777669182f6584c64}{I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L}(lck)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_acc540f5f662d26296dd6b57ad5fbe198}{\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks} (\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void})
\item 
static kmp\-\_\-int32 \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static bool \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \-\_\-\-\_\-forceinline \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a90eda0b2a14f0587a36defe637acb8bd}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a1081f214daf0024f610101a119a755c3}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_adca5fc5b895642eb2bd6dc7372b4d4d5}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af6eab9fe4c97bddc877fb562765bc3ff}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a8d0c321cd228438dd28a75e2182b37ac}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a70ab5cc7e70192354a19bd8e988633de}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af0bd0985606b39fc88daf9b62e068e30}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a6910bddf07333ffb43a964b0c1024cc9}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a93a728a902b1143af1d46caf104b51fd}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_aad47e333c1f4f106d46aa9aeb05d7e44}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a11b54e01eeda3bef3308c78112d90f1a}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ad3c579e57f03a343c86e011205345eaf}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ae0bc12c4c9863b59e92e1be429769af0}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_abae3037662366a74c1e4f0583ccf5d09}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a2eade2551edf3616cd9afdfbe32de2e2}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ae71d01aac235b0c49d32e23140202cb3}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a1ce89a76d1bc57c7e8f3fe28c7cc8b5d}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a952df1cf45471858e329cd5bed3c1e44}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_ab54c52481f17ea6854bb26d9df4608d8}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a05e58bb87b617845e07f6f1bf1022224}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static kmp\-\_\-int32 \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static bool \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static kmp\-\_\-uint32 \hyperlink{kmp__lock_8cpp_a86c1ae7c1a6028e35d499a0317b7a229}{\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check} (kmp\-\_\-uint32 value, kmp\-\_\-uint32 checker)
\item 
static \-\_\-\-\_\-forceinline \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af17623be2b2324c4e59177af73d2e9df}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_aa542c57880dc230891c312d3e437cf4b}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a911af950cb940df53fef4b77cd305ce9}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_aa00f8e9cca0115bb7d3f95521b30e857}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_abcb58daf6d01f54b62e77ad838342013}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af7bfd10b1c098b8892beae42bb8a5248}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ad7ac0bfe873e304f3a0a2113e39640b1}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a8360eff68dcfb40f79905d2c1a40b858}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a57519a5034947b84bc89cb61943bf28e}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_aabae1b0b6d9af23a942b6d7f1cd283d3}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ad557a5c10b8a62a267fd0f1ea074ed78}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a67dde389b3c131eb4b3b2a0d0e71ce0d}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a603e841ba0679823463f7e1b5f90109e}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a81339459a840eae32705a930d22c4f4a}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ad48bc722675e410e313cede50ecd136b}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_aa79feb6f042236e7facc2efe6c4fc6af}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a52e2d9c13833e285fbdb399910d7cb81}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a271c9dd74b9c9cf1b7e94bbf0155b9b9}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_afec79550bad550c65518370caaff68b4}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a807fd9e0a7782840cd5d18970d11baa9}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a316f653461685c91019c91d17bb72079}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$ \hyperlink{kmp__lock_8cpp_a796613f4e112e671712f9e2f1abd1099}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_ae6d682199807a24e57b80031663fb501}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc)
\item 
static \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} \hyperlink{kmp__lock_8cpp_af46aee05fcd8cc61c645e688c07e5843}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_aa063a4bc0e977a61e35720f389057c54}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$lck, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} flags)
\item 
static kmp\-\_\-int32 \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static bool \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
{\footnotesize template$<$bool take\-Time$>$ }\\static \-\_\-\-\_\-forceinline \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a1a338eaf404032c931aa8c8aaef65ce3}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ad1d774b33df1b6c5eb34ffbef15d2898}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ade33cf1094f160ac89f17b16a8e1e80b}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a88591c51c56cf31b41017384f3c20aeb}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af8be51ca9a6c379b78d1076f67219f51}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a4ba248b5ce7375a2426f3c38b091b3c9}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a5c64e923324a01251bc1948d82b75a06}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a0869739ab886c0aca60907b410b6d3c3}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a64d217a317cf74d8c872f1174249c947}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a8c7d0c7e04ae9f130628ff0aeb1552dd}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a9e5080b25dc6c63c076a9b7740075418}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a702f22129b5bb8fb5fcbddc1c4384e58}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a7d6b6771619f2c7adbb0a5860d9f41c0}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a4b624f1a689eac9269b35f04ed359d46}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a38243fd45b7b9b88063908da650b38e5}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af2d68a5d37218d5b77e89225f4b3591c}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a91cef94027193d6fce5dc7214b7e4cf4}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a1bd738f66f1fb1060859bb2d4a7f57c4}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_abc2b4753850f11019fc15a6d60c8407f}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_af424bf33c21ccab7b5c475df32f895ce}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a10f938d5fa98d18caa87a32917484c61}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$ \hyperlink{kmp__lock_8cpp_a3bb2a5e779ce7f98cf0e2851bb78b025}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a6f2c2af85ae2de82ebb6bbcecab71448}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc)
\item 
static \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} \hyperlink{kmp__lock_8cpp_aedca2aad3b326e978793f8d008d8ce4e}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a1b12b25fb6f4a6adce6483ed17861e81}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$lck, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} flags)
\item 
static kmp\-\_\-int32 \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static bool \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \-\_\-\-\_\-forceinline \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a8aa377bfd4f9783957b5b1503fd3120c}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a235521042251a1cdb6ceec82f8e67571}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a55cb7e86cea47b7f807139361309a7fe}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a38a0a47b620d9562a2c87d5e45cb2c0b}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_abdc814adb697d75141602a9095725e0e}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a866a2afd8eed86955bd2953c53d18b4d}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_ae045df4e2caa6fa607d86275769332e2}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_ac1b2df3e3b7ca930b8fc3cbfb9a5c76b}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a74a9e1c22990aa4d56514d22ed017ea9}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a90dc8876d306d1884e1bd025ebe60dc6}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a5bd1771b2b8083bf0ec6d42805f65e7c}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_af2e06c433154e72f888352788581544b}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_abee3ed3d1bc6ab32bf11a67b2354c854}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a0744b69a77fd45024e583651d203ffb2}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a9635a8939b0932ce57e50f483f007772}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a8204b5ee072f712bb171be70c36ff3fd}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, kmp\-\_\-int32 gtid)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a3dd5913d184644e4bf4575ad8ad9955f}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a09408ebf48c74166bf8c6a03c2c14241}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a4014554e8a4e2f4a56ca51fa46969d9a}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a5781ee760b6f7da25a95cca6fee80172}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_af8bbf205604614376e6ed6eceb3043b3}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$ \hyperlink{kmp__lock_8cpp_a505ed8bf2d06a8cd74e3c0409ccf91cb}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a180c259e5f3273dae86d5e84e645567b}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc)
\item 
static \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} \hyperlink{kmp__lock_8cpp_a51b058c74beed1de5d14e8db705519cc}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck)
\item 
static \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a9befb445685d4f9598f62b3fb1112a45}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags} (\hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$lck, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} flags)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a419cdea86a64e2a7b1cb78f3f28404b8}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs} (\hyperlink{kmp__lock_8h_a3208673a8eeb0169d9273421f8bbbfaa}{kmp\-\_\-lock\-\_\-kind\-\_\-t} user\-\_\-lock\-\_\-kind)
\item 
static \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\-\_\-lock\-\_\-index\-\_\-t} \hyperlink{kmp__lock_8cpp_ae5504ced69ec77de5e5dbb42b1d3bf76}{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert} (\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck)
\item 
static \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} \hyperlink{kmp__lock_8cpp_a9b19a714b89b607acf8c5fde8b4bedcd}{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate} ()
\item 
\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} \hyperlink{kmp__lock_8cpp_a10c0876b4da16c6b3a6ff43e08dce1bc}{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate} (\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} $\ast$$\ast$user\-\_\-lock, kmp\-\_\-int32 gtid, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} flags)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_a89dbafea8bd238f6be92af997e823f60}{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free} (\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} $\ast$$\ast$user\-\_\-lock, kmp\-\_\-int32 gtid, \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck)
\item 
\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} \hyperlink{kmp__lock_8cpp_a9f1ad5ed1f7644fa070c0952a8b62e67}{\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock} (\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} $\ast$$\ast$user\-\_\-lock, char const $\ast$func)
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} \hyperlink{kmp__lock_8cpp_ab6344f2921c6935ec0e25e8e26719ea9}{\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks} (\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51e}{kmp\-\_\-lock\-\_\-kind} \hyperlink{kmp__lock_8cpp_a0e6c33ed4cfc6430f93288ca2c2bfebe}{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind} = \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51ea223583ac14cee27c01e4cee04139083e}{lk\-\_\-default}
\item 
size\-\_\-t \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size} = 0
\item 
size\-\_\-t \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size} = 0
\item 
kmp\-\_\-int32($\ast$ \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a51acf10d279b7ac94d75afb47c99229e}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a61452fcaf5e2c5dfe1260d2b6df8b469}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a822335df558800c634178e5507a53c34}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_a74b758302b7be1af24367f6b12574823}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_aa375d03bf5698dc712e5c819410ce9b2}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a94b8d6eeaf00ec7805b98b66d8d9a709}{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_ae060af051b73d491221e82395b563fcd}{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a9467b02a2b8ac0faef4fa9d043774d74}{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_ac41c13bcd02c27b75ca6e8701a16d21c}{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_acc5e8a9dccb0b2decd7c37ed96601095}{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int}($\ast$ \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$($\ast$ \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, const \hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc) = N\-U\-L\-L
\item 
\hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t}($\ast$ \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void}($\ast$ \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-} )(\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} lck, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\-\_\-lock\-\_\-flags\-\_\-t} flags) = N\-U\-L\-L
\item 
\hyperlink{kmp__lock_8h_ac1e9a27a6dfbdfefb63e7a169662dc52}{kmp\-\_\-lock\-\_\-table\-\_\-t} \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table} = \{ 1, 0, N\-U\-L\-L \}
\item 
\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\-\_\-user\-\_\-lock\-\_\-p} \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool} = N\-U\-L\-L
\item 
\hyperlink{structkmp__block__of__locks}{kmp\-\_\-block\-\_\-of\-\_\-locks} $\ast$ \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks} = N\-U\-L\-L
\item 
\hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} \hyperlink{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}{\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block} = 1
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{kmp__lock_8cpp_a990ed2e70e7d9ab777669182f6584c64}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L@{I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L}}
\index{I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L@{I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\-S\-\_\-\-C\-R\-I\-T\-I\-C\-A\-L(
\begin{DoxyParamCaption}
\item[{}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a990ed2e70e7d9ab777669182f6584c64}
{\bfseries Value\-:}
\begin{DoxyCode}
( ( \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} != NULL ) && \(\backslash\)
        ( ( *\hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} )( lck ) & 
      \hyperlink{kmp__lock_8h_a97a187446f4ef8a2116c4b8a191d5fce}{kmp\_lf\_critical\_section} ) )
\end{DoxyCode}


Referenced by \-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks().



\subsection{Function Documentation}
\hypertarget{kmp__lock_8cpp_a235521042251a1cdb6ceec82f8e67571}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a235521042251a1cdb6ceec82f8e67571}


Definition at line 2648 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2649 \{
2650     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a8aa377bfd4f9783957b5b1503fd3120c}{\_\_kmp\_acquire\_drdpa\_lock\_timed\_template}( lck, gtid );
2651 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a8aa377bfd4f9783957b5b1503fd3120c}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template}]{\setlength{\rightskip}{0pt plus 5cm}static \-\_\-\-\_\-forceinline {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-timed\-\_\-template (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a8aa377bfd4f9783957b5b1503fd3120c}


Definition at line 2482 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock().


\begin{DoxyCode}
2483 \{
2484     kmp\_uint64 ticket = \hyperlink{kmp__os_8h_aee7d2212f088bf506be1b14d6d41de36}{KMP\_TEST\_THEN\_INC64}((kmp\_int64 *)&lck->
      \hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket});
2485     kmp\_uint64 \hyperlink{ittnotify__static_8h_aa2c7de905e06240a7170f2a0da3a5abf}{mask} = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask});              \textcolor{comment}{// volatile load}
2486     \textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *
      \hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls}
2487       = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *)
2488       \hyperlink{kmp__os_8h_a6e40f65c18c7b47fb612607b9bf8fdfc}{TCR\_PTR}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls});                           \textcolor{comment}{// volatile load}
2489 
2490 \textcolor{preprocessor}{#ifdef USE\_LOCK\_PROFILE}
2491 \textcolor{preprocessor}{}    \textcolor{keywordflow}{if} (\hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(polls[ticket & mask].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll}) != ticket)
2492         \hyperlink{kmp__io_8c_ac0b96ed999ee9819c544e6f24057da91}{\_\_kmp\_printf}(\textcolor{stringliteral}{"LOCK CONTENTION: %p\(\backslash\)n"}, lck);
2493     \textcolor{comment}{/* else \_\_kmp\_printf( "." );*/}
2494 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* USE\_LOCK\_PROFILE */}\textcolor{preprocessor}{}
2495 \textcolor{preprocessor}{}
2496     \textcolor{comment}{//}
2497     \textcolor{comment}{// Now spin-wait, but reload the polls pointer and mask, in case the}
2498     \textcolor{comment}{// polling area has been reconfigured.  Unless it is reconfigured, the}
2499     \textcolor{comment}{// reloads stay in L1 cache and are cheap.}
2500     \textcolor{comment}{//}
2501     \textcolor{comment}{// Keep this code in sync with KMP\_WAIT\_YIELD, in kmp\_dispatch.c !!!}
2502     \textcolor{comment}{//}
2503     \textcolor{comment}{// The current implementation of KMP\_WAIT\_YIELD doesn't allow for mask}
2504     \textcolor{comment}{// and poll to be re-read every spin iteration.}
2505     \textcolor{comment}{//}
2506     kmp\_uint32 spins;
2507 
2508     \hyperlink{kmp__itt_8h_a186799e882a28455ba75207cc8b5dbbb}{KMP\_FSYNC\_PREPARE}(lck);
2509     \hyperlink{kmp_8h_a98cb21bfd34ebd451007a151f135b31c}{KMP\_INIT\_YIELD}(spins);
2510     \textcolor{keywordflow}{while} (\hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(polls[ticket & mask]).poll < ticket) \{ \textcolor{comment}{// volatile load}
2511         \textcolor{comment}{// If we are oversubscribed,}
2512         \textcolor{comment}{// or have waited a bit (and KMP\_LIBRARY=turnaround), then yield.}
2513         \textcolor{comment}{// CPU Pause is in the macros for yield.}
2514         \textcolor{comment}{//}
2515         \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}(\hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}(\hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth})
2516           > (\hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} : 
      \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc}));
2517         \hyperlink{kmp_8h_a0b31ac108fea7d8034ea5145d74a7a77}{KMP\_YIELD\_SPIN}(spins);
2518 
2519         \textcolor{comment}{// Re-read the mask and the poll pointer from the lock structure.}
2520         \textcolor{comment}{//}
2521         \textcolor{comment}{// Make certain that "mask" is read before "polls" !!!}
2522         \textcolor{comment}{//}
2523         \textcolor{comment}{// If another thread picks reconfigures the polling area and updates}
2524         \textcolor{comment}{// their values, and we get the new value of mask and the old polls}
2525         \textcolor{comment}{// pointer, we could access memory beyond the end of the old polling}
2526         \textcolor{comment}{// area.}
2527         \textcolor{comment}{//}
2528         mask = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask});                     \textcolor{comment}{// volatile load}
2529         polls = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *)
2530           \hyperlink{kmp__os_8h_a6e40f65c18c7b47fb612607b9bf8fdfc}{TCR\_PTR}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls});                       \textcolor{comment}{// volatile load}
2531     \}
2532 
2533     \textcolor{comment}{//}
2534     \textcolor{comment}{// Critical section starts here}
2535     \textcolor{comment}{//}
2536     \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
2537     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_drdpa\_lock: ticket #%lld acquired lock %p\(\backslash\)n"},
2538       ticket, lck));
2539     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a5b614d7eb0d32b3ce7e9412aa6ac24d6}{now\_serving} = ticket;                       \textcolor{comment}{// non-volatile store}
2540 
2541     \textcolor{comment}{//}
2542     \textcolor{comment}{// Deallocate a garbage polling area if we know that we are the last}
2543     \textcolor{comment}{// thread that could possibly access it.}
2544     \textcolor{comment}{//}
2545     \textcolor{comment}{// The >= check is in case \_\_kmp\_test\_drdpa\_lock() allocated the cleanup}
2546     \textcolor{comment}{// ticket.}
2547     \textcolor{comment}{//}
2548     \textcolor{keywordflow}{if} ((lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} != NULL) && (ticket >= lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.
      \hyperlink{structkmp__base__drdpa__lock_a6b95d65ec5cc5135a0eed70eafdc11ed}{cleanup\_ticket})) \{
2549         \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}((\textcolor{keywordtype}{void} *)lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls});
2550         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} = NULL;
2551         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a6b95d65ec5cc5135a0eed70eafdc11ed}{cleanup\_ticket} = 0;
2552     \}
2553 
2554     \textcolor{comment}{//}
2555     \textcolor{comment}{// Check to see if we should reconfigure the polling area.}
2556     \textcolor{comment}{// If there is still a garbage polling area to be deallocated from a}
2557     \textcolor{comment}{// previous reconfiguration, let a later thread reconfigure it.}
2558     \textcolor{comment}{//}
2559     \textcolor{keywordflow}{if} (lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} == NULL) \{
2560         \textcolor{keywordtype}{bool} reconfigure = \textcolor{keyword}{false};
2561         \textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *
      \hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} = \hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls};
2562         kmp\_uint32 \hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls} = \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls});
2563 
2564         \textcolor{keywordflow}{if} (\hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}(\hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth})
2565           > (\hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} : 
      \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc})) \{
2566             \textcolor{comment}{//}
2567             \textcolor{comment}{// We are in oversubscription mode.  Contract the polling area}
2568             \textcolor{comment}{// down to a single location, if that hasn't been done already.}
2569             \textcolor{comment}{//}
2570             \textcolor{keywordflow}{if} (num\_polls > 1) \{
2571                 reconfigure = \textcolor{keyword}{true};
2572                 num\_polls = \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls});
2573                 mask = 0;
2574                 num\_polls = 1;
2575                 polls = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll}
       *)
2576                   \hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}(num\_polls * \textcolor{keyword}{sizeof}(*polls));
2577                 polls[0].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll} = ticket;
2578             \}
2579         \}
2580         \textcolor{keywordflow}{else} \{
2581             \textcolor{comment}{//}
2582             \textcolor{comment}{// We are in under/fully subscribed mode.  Check the number of}
2583             \textcolor{comment}{// threads waiting on the lock.  The size of the polling area}
2584             \textcolor{comment}{// should be at least the number of threads waiting.}
2585             \textcolor{comment}{//}
2586             kmp\_uint64 num\_waiting = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket}) - ticket - 1;
2587             \textcolor{keywordflow}{if} (num\_waiting > num\_polls) \{
2588                 kmp\_uint32 old\_num\_polls = \hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls};
2589                 reconfigure = \textcolor{keyword}{true};
2590                 \textcolor{keywordflow}{do} \{
2591                     mask = (mask << 1) | 1;
2592                     num\_polls *= 2;
2593                 \} \textcolor{keywordflow}{while} (num\_polls <= num\_waiting);
2594 
2595                 \textcolor{comment}{//}
2596                 \textcolor{comment}{// Allocate the new polling area, and copy the relevant portion}
2597                 \textcolor{comment}{// of the old polling area to the new area.  \_\_kmp\_allocate()}
2598                 \textcolor{comment}{// zeroes the memory it allocates, and most of the old area is}
2599                 \textcolor{comment}{// just zero padding, so we only copy the release counters.}
2600                 \textcolor{comment}{//}
2601                 polls = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll}
       *)
2602                   \hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}(num\_polls * \textcolor{keyword}{sizeof}(*polls));
2603                 kmp\_uint32 \hyperlink{kmp__stub_8c_a08582ce460e3d5e1cf0b7fea017d608e}{i};
2604                 \textcolor{keywordflow}{for} (i = 0; i < old\_num\_polls; i++) \{
2605                     polls[\hyperlink{kmp__stub_8c_a08582ce460e3d5e1cf0b7fea017d608e}{i}].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll} = old\_polls[\hyperlink{kmp__stub_8c_a08582ce460e3d5e1cf0b7fea017d608e}{i}].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll};
2606                 \}
2607             \}
2608         \}
2609 
2610         \textcolor{keywordflow}{if} (reconfigure) \{
2611             \textcolor{comment}{//}
2612             \textcolor{comment}{// Now write the updated fields back to the lock structure.}
2613             \textcolor{comment}{//}
2614             \textcolor{comment}{// Make certain that "polls" is written before "mask" !!!}
2615             \textcolor{comment}{//}
2616             \textcolor{comment}{// If another thread picks up the new value of mask and the old}
2617             \textcolor{comment}{// polls pointer , it could access memory beyond the end of the}
2618             \textcolor{comment}{// old polling area.}
2619             \textcolor{comment}{//}
2620             \textcolor{comment}{// On x86, we need memory fences.}
2621             \textcolor{comment}{//}
2622             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_drdpa\_lock: ticket #%lld reconfiguring lock %p to %d
       polls\(\backslash\)n"},
2623               ticket, lck, num\_polls));
2624 
2625             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} = \hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls};              \textcolor{comment}{// non-volatile store}
2626             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls} = \hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls};                      \textcolor{comment}{// volatile store}
2627 
2628             \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2629 
2630             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls} = \hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls};              \textcolor{comment}{// non-volatile store}
2631             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask} = \hyperlink{ittnotify__static_8h_aa2c7de905e06240a7170f2a0da3a5abf}{mask};                        \textcolor{comment}{// volatile store}
2632 
2633             \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2634 
2635             \textcolor{comment}{//}
2636             \textcolor{comment}{// Only after the new polling area and mask have been flushed}
2637             \textcolor{comment}{// to main memory can we update the cleanup ticket field.}
2638             \textcolor{comment}{//}
2639             \textcolor{comment}{// volatile load / non-volatile store}
2640             \textcolor{comment}{//}
2641             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a6b95d65ec5cc5135a0eed70eafdc11ed}{cleanup\_ticket} = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.
      \hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket});
2642         \}
2643     \}
2644     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
2645 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a55cb7e86cea47b7f807139361309a7fe}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a55cb7e86cea47b7f807139361309a7fe}


Definition at line 2654 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2655 \{
2656     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_lock"};
2657     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2658         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2659     \}
2660     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2661         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
2662     \}
2663     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) == gtid ) ) \{
2664         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsAlreadyOwned, func );
2665     \}
2666 
2667     \hyperlink{kmp__lock_8cpp_a235521042251a1cdb6ceec82f8e67571}{\_\_kmp\_acquire\_drdpa\_lock}( lck, gtid );
2668 
2669     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = gtid + 1;
2670     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
2671 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a5bd1771b2b8083bf0ec6d42805f65e7c}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a5bd1771b2b8083bf0ec6d42805f65e7c}


Definition at line 2839 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2840 \{
2841     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
2842 
2843     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) == gtid ) \{
2844         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} += 1;
2845         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_aa49e28e2a2415c6b4beb27680208532b}{KMP\_LOCK\_ACQUIRED\_NEXT};
2846     \}
2847     \textcolor{keywordflow}{else} \{
2848         \hyperlink{kmp__lock_8cpp_a8aa377bfd4f9783957b5b1503fd3120c}{\_\_kmp\_acquire\_drdpa\_lock\_timed\_template}( lck, gtid );
2849         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2850         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = 1;
2851         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2852         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = gtid + 1;
2853         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
2854     \}
2855 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af2e06c433154e72f888352788581544b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af2e06c433154e72f888352788581544b}


Definition at line 2858 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2859 \{
2860     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_nest\_lock"};
2861     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2862         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2863     \}
2864     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2865         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
2866     \}
2867     \hyperlink{kmp__lock_8cpp_a5bd1771b2b8083bf0ec6d42805f65e7c}{\_\_kmp\_acquire\_nested\_drdpa\_lock}( lck, gtid );
2868 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9e5080b25dc6c63c076a9b7740075418}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a9e5080b25dc6c63c076a9b7740075418}


Definition at line 1705 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1706 \{
1707     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1708 
1709     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) == gtid ) \{
1710         lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} += 1;
1711         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_aa49e28e2a2415c6b4beb27680208532b}{KMP\_LOCK\_ACQUIRED\_NEXT};
1712     \}
1713     \textcolor{keywordflow}{else} \{
1714         \_\_kmp\_acquire\_queuing\_lock\_timed\_template<false>( lck, gtid );
1715         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1716         lck->lk.depth\_locked = 1;
1717         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1718         lck->lk.owner\_id = gtid + 1;
1719         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
1720     \}
1721 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a702f22129b5bb8fb5fcbddc1c4384e58}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a702f22129b5bb8fb5fcbddc1c4384e58}


Definition at line 1724 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1725 \{
1726     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_nest\_lock"};
1727     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1728         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1729     \}
1730     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1731         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1732     \}
1733     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a9e5080b25dc6c63c076a9b7740075418}{\_\_kmp\_acquire\_nested\_queuing\_lock}( lck, gtid );
1734 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a11b54e01eeda3bef3308c78112d90f1a}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a11b54e01eeda3bef3308c78112d90f1a}


Definition at line 246 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
247 \{
248     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
249 
250     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) == gtid ) \{
251         lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} += 1;
252         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_aa49e28e2a2415c6b4beb27680208532b}{KMP\_LOCK\_ACQUIRED\_NEXT};
253     \}
254     \textcolor{keywordflow}{else} \{
255         \hyperlink{kmp__lock_8cpp_a90eda0b2a14f0587a36defe637acb8bd}{\_\_kmp\_acquire\_tas\_lock\_timed\_template}( lck, gtid );
256         lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} = 1;
257         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
258     \}
259 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ad3c579e57f03a343c86e011205345eaf}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ad3c579e57f03a343c86e011205345eaf}


Definition at line 262 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
263 \{
264     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_nest\_lock"};
265     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
266         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
267     \}
268     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a11b54e01eeda3bef3308c78112d90f1a}{\_\_kmp\_acquire\_nested\_tas\_lock}( lck, gtid );
269 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ad557a5c10b8a62a267fd0f1ea074ed78}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ad557a5c10b8a62a267fd0f1ea074ed78}


Definition at line 917 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
918 \{
919     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
920 
921     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) == gtid ) \{
922         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} += 1;
923         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_aa49e28e2a2415c6b4beb27680208532b}{KMP\_LOCK\_ACQUIRED\_NEXT};
924     \}
925     \textcolor{keywordflow}{else} \{
926         \hyperlink{kmp__lock_8cpp_af17623be2b2324c4e59177af73d2e9df}{\_\_kmp\_acquire\_ticket\_lock\_timed\_template}( lck, gtid );
927         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
928         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = 1;
929         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
930         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = gtid + 1;
931         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
932     \}
933 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a67dde389b3c131eb4b3b2a0d0e71ce0d}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a67dde389b3c131eb4b3b2a0d0e71ce0d}


Definition at line 936 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
937 \{
938     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_nest\_lock"};
939     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
940         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
941     \}
942     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
943         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
944     \}
945     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_ad557a5c10b8a62a267fd0f1ea074ed78}{\_\_kmp\_acquire\_nested\_ticket\_lock}( lck, gtid );
946 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ad1d774b33df1b6c5eb34ffbef15d2898}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ad1d774b33df1b6c5eb34ffbef15d2898}


Definition at line 1407 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-atomic\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1408 \{
1409     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1410 
1411     \textcolor{keywordflow}{return} \_\_kmp\_acquire\_queuing\_lock\_timed\_template<false>( lck, gtid );
1412 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a1a338eaf404032c931aa8c8aaef65ce3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template}]{\setlength{\rightskip}{0pt plus 5cm}template$<$bool take\-Time$>$ static \-\_\-\-\_\-forceinline {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-timed\-\_\-template (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a1a338eaf404032c931aa8c8aaef65ce3}


Definition at line 1210 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1212 \{
1213     \textcolor{keyword}{register} \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t} *this\_thr    = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( gtid );
1214     \textcolor{keyword}{volatile} kmp\_int32  *head\_id\_p   = & lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7394dd8dc4fcc01f0ca8acda1a2ac82a}{head\_id};
1215     \textcolor{keyword}{volatile} kmp\_int32  *tail\_id\_p   = & lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.tail\_id;
1216     \textcolor{keyword}{volatile} kmp\_uint32 *spin\_here\_p;
1217     kmp\_int32 need\_mf = 1;
1218 
1219 \textcolor{preprocessor}{#if OMPT\_SUPPORT}
1220 \textcolor{preprocessor}{}    ompt\_state\_t prev\_state = ompt\_state\_undefined;
1221 \textcolor{preprocessor}{#endif}
1222 \textcolor{preprocessor}{}
1223     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_queuing\_lock: lck:%p, T#%d entering\(\backslash\)n"}, lck, gtid ));
1224 
1225     \hyperlink{kmp__itt_8h_a186799e882a28455ba75207cc8b5dbbb}{KMP\_FSYNC\_PREPARE}( lck );
1226     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr != NULL );
1227     spin\_here\_p = & this\_thr->th.th\_spin\_here;
1228 
1229 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1230 \textcolor{preprocessor}{}    TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq ent"} );
1231     \textcolor{keywordflow}{if} ( *spin\_here\_p )
1232         \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, *head\_id\_p, *tail\_id\_p );
1233     \textcolor{keywordflow}{if} ( this\_thr->th.th\_next\_waiting != 0 )
1234         \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, *head\_id\_p, *tail\_id\_p );
1235 \textcolor{preprocessor}{#endif}
1236 \textcolor{preprocessor}{}    \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( !*spin\_here\_p );
1237     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr->th.th\_next\_waiting == 0 );
1238 
1239 
1240     \textcolor{comment}{/* The following st.rel to spin\_here\_p needs to precede the cmpxchg.acq to head\_id\_p}
1241 \textcolor{comment}{       that may follow, not just in execution order, but also in visibility order.  This way,}
1242 \textcolor{comment}{       when a releasing thread observes the changes to the queue by this thread, it can}
1243 \textcolor{comment}{       rightly assume that spin\_here\_p has already been set to TRUE, so that when it sets}
1244 \textcolor{comment}{       spin\_here\_p to FALSE, it is not premature.  If the releasing thread sets spin\_here\_p}
1245 \textcolor{comment}{       to FALSE before this thread sets it to TRUE, this thread will hang.}
1246 \textcolor{comment}{    */}
1247     *spin\_here\_p = \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};  \textcolor{comment}{/* before enqueuing to prevent race */}
1248 
1249     \textcolor{keywordflow}{while}( 1 ) \{
1250         kmp\_int32 enqueued;
1251         kmp\_int32 \hyperlink{ittnotify__static_8h_ac73017ec329810f133ecdb16b66e5208}{head};
1252         kmp\_int32 \hyperlink{ittnotify__static_8h_a7205a2ef1da3b41743f40e66ffb8a1be}{tail};
1253 
1254         head = *head\_id\_p;
1255 
1256         \textcolor{keywordflow}{switch} ( head ) \{
1257 
1258             \textcolor{keywordflow}{case} -1:
1259             \{
1260 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1261 \textcolor{preprocessor}{}                tail = *tail\_id\_p;
1262                 TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"acq read: "}, head, tail );
1263 \textcolor{preprocessor}{#endif}
1264 \textcolor{preprocessor}{}                tail = 0;  \textcolor{comment}{/* to make sure next link asynchronously read is not set accidentally;}
1265 \textcolor{comment}{                           this assignment prevents us from entering the if ( t > 0 )}
1266 \textcolor{comment}{                           condition in the enqueued case below, which is not necessary for}
1267 \textcolor{comment}{                           this state transition */}
1268 
1269                 need\_mf = 0;
1270                 \textcolor{comment}{/* try (-1,0)->(tid,tid) */}
1271                 enqueued = \hyperlink{kmp__os_8h_a530a2ef10afdb7b7f5dcf2ac226e80ba}{KMP\_COMPARE\_AND\_STORE\_ACQ64}( (\textcolor{keyword}{volatile} kmp\_int64 *) 
      tail\_id\_p,
1272                   \hyperlink{kmp_8h_a133ff43911954aaf8d6b43003643e22a}{KMP\_PACK\_64}( -1, 0 ),
1273                   \hyperlink{kmp_8h_a133ff43911954aaf8d6b43003643e22a}{KMP\_PACK\_64}( gtid+1, gtid+1 ) );
1274 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1275 \textcolor{preprocessor}{}                  \textcolor{keywordflow}{if} ( enqueued ) TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq enq: (-1,0)->(tid,tid)"} );
1276 \textcolor{preprocessor}{#endif}
1277 \textcolor{preprocessor}{}            \}
1278             \textcolor{keywordflow}{break};
1279 
1280             \textcolor{keywordflow}{default}:
1281             \{
1282                 tail = *tail\_id\_p;
1283                 \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( tail != gtid + 1 );
1284 
1285 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1286 \textcolor{preprocessor}{}                TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"acq read: "}, head, tail );
1287 \textcolor{preprocessor}{#endif}
1288 \textcolor{preprocessor}{}
1289                 \textcolor{keywordflow}{if} ( tail == 0 ) \{
1290                     enqueued = \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1291                 \}
1292                 \textcolor{keywordflow}{else} \{
1293                     need\_mf = 0;
1294                     \textcolor{comment}{/* try (h,t) or (h,h)->(h,tid) */}
1295                     enqueued = \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( tail\_id\_p, tail, 
      gtid+1 );
1296 
1297 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1298 \textcolor{preprocessor}{}                        \textcolor{keywordflow}{if} ( enqueued ) TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq enq: (h,t)->(h,tid)"} );
1299 \textcolor{preprocessor}{#endif}
1300 \textcolor{preprocessor}{}                \}
1301             \}
1302             \textcolor{keywordflow}{break};
1303 
1304             \textcolor{keywordflow}{case} 0: \textcolor{comment}{/* empty queue */}
1305             \{
1306                 kmp\_int32 grabbed\_lock;
1307 
1308 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1309 \textcolor{preprocessor}{}                tail = *tail\_id\_p;
1310                 TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"acq read: "}, head, tail );
1311 \textcolor{preprocessor}{#endif}
1312 \textcolor{preprocessor}{}                \textcolor{comment}{/* try (0,0)->(-1,0) */}
1313 
1314                 \textcolor{comment}{/* only legal transition out of head = 0 is head = -1 with no change to tail */}
1315                 grabbed\_lock = \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( head\_id\_p, 0, -1 );
1316 
1317                 \textcolor{keywordflow}{if} ( grabbed\_lock ) \{
1318 
1319                     *spin\_here\_p = \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1320 
1321                     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_queuing\_lock: lck:%p, T#%d exiting: no queuing
      \(\backslash\)n"},
1322                               lck, gtid ));
1323 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1324 \textcolor{preprocessor}{}                    TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"acq exit: "}, head, 0 );
1325 \textcolor{preprocessor}{#endif}
1326 \textcolor{preprocessor}{}
1327 \textcolor{preprocessor}{#if OMPT\_SUPPORT}
1328 \textcolor{preprocessor}{}                    \textcolor{keywordflow}{if} (\hyperlink{ompt-general_8c_a966b31b6d05f79f5495f8d8e71732f68}{ompt\_enabled} && prev\_state != ompt\_state\_undefined) \{
1329                         \textcolor{comment}{/* change the state before clearing wait\_id */}
1330                         this\_thr->th.ompt\_thread\_info.state = prev\_state;
1331                         this\_thr->th.ompt\_thread\_info.wait\_id = 0;
1332                     \}
1333 \textcolor{preprocessor}{#endif}
1334 \textcolor{preprocessor}{}
1335                     \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}( lck );
1336                     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST}; \textcolor{comment}{/* lock holder cannot be on
       queue */}
1337                 \}
1338                 enqueued = \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1339             \}
1340             \textcolor{keywordflow}{break};
1341         \}
1342 
1343 \textcolor{preprocessor}{#if OMPT\_SUPPORT}
1344 \textcolor{preprocessor}{}        \textcolor{keywordflow}{if} (\hyperlink{ompt-general_8c_a966b31b6d05f79f5495f8d8e71732f68}{ompt\_enabled} && prev\_state == ompt\_state\_undefined) \{
1345             \textcolor{comment}{/* this thread will spin; set wait\_id before entering wait state */}
1346             prev\_state = this\_thr->th.ompt\_thread\_info.state;
1347             this\_thr->th.ompt\_thread\_info.wait\_id = (uint64\_t) lck;
1348             this\_thr->th.ompt\_thread\_info.state = ompt\_state\_wait\_lock;
1349         \}
1350 \textcolor{preprocessor}{#endif}
1351 \textcolor{preprocessor}{}
1352         \textcolor{keywordflow}{if} ( enqueued ) \{
1353             \textcolor{keywordflow}{if} ( tail > 0 ) \{
1354                 \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t} *tail\_thr = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( tail - 1 );
1355                 \hyperlink{kmp__debug_8h_a5323a368e8ba273b17c46906dd9ec78c}{KMP\_ASSERT}( tail\_thr != NULL );
1356                 tail\_thr->th.th\_next\_waiting = gtid+1;
1357                 \textcolor{comment}{/* corresponding wait for this write in release code */}
1358             \}
1359             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_queuing\_lock: lck:%p, T#%d waiting for lock\(\backslash\)n"}, lck, 
      gtid ));
1360 
1361 
1362             \textcolor{comment}{/* ToDo: May want to consider using \_\_kmp\_wait\_sleep  or something that sleeps for}
1363 \textcolor{comment}{             *       throughput only here.}
1364 \textcolor{comment}{             */}
1365             \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1366             \hyperlink{kmp__os_8h_a355e68ac2502d05ca4df8c3b20784dae}{KMP\_WAIT\_YIELD}(spin\_here\_p, \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{kmp__os_8h_ac546f755fb26ab453bc8af8e759b3758}{KMP\_EQ}, lck);
1367 
1368 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1369 \textcolor{preprocessor}{}            TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq spin"} );
1370 
1371             \textcolor{keywordflow}{if} ( this\_thr->th.th\_next\_waiting != 0 )
1372                 \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, *head\_id\_p, *tail\_id\_p );
1373 \textcolor{preprocessor}{#endif}
1374 \textcolor{preprocessor}{}            \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr->th.th\_next\_waiting == 0 );
1375             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_acquire\_queuing\_lock: lck:%p, T#%d exiting: after waiting on
       queue\(\backslash\)n"},
1376                       lck, gtid ));
1377 
1378 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1379 \textcolor{preprocessor}{}            TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq exit 2"} );
1380 \textcolor{preprocessor}{#endif}
1381 \textcolor{preprocessor}{}
1382 \textcolor{preprocessor}{#if OMPT\_SUPPORT}
1383 \textcolor{preprocessor}{}            \textcolor{comment}{/* change the state before clearing wait\_id */}
1384             this\_thr->th.ompt\_thread\_info.state = prev\_state;
1385             this\_thr->th.ompt\_thread\_info.wait\_id = 0;
1386 \textcolor{preprocessor}{#endif}
1387 \textcolor{preprocessor}{}
1388             \textcolor{comment}{/* got lock, we were dequeued by the thread that released lock */}
1389             \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
1390         \}
1391 
1392         \textcolor{comment}{/* Yield if number of threads > number of logical processors */}
1393         \textcolor{comment}{/* ToDo: Not sure why this should only be in oversubscription case,}
1394 \textcolor{comment}{           maybe should be traditional YIELD\_INIT/YIELD\_WHEN loop */}
1395         \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( \hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth} ) > (\hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? 
      \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} :
1396           \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc} ) );
1397 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1398 \textcolor{preprocessor}{}        TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"acq retry"} );
1399 \textcolor{preprocessor}{#endif}
1400 \textcolor{preprocessor}{}
1401     \}
1402     \hyperlink{kmp__debug_8h_afa985a577299cb10dafe8d3bd462d635}{KMP\_ASSERT2}( 0, \textcolor{stringliteral}{"should not get here"} );
1403     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
1404 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ade33cf1094f160ac89f17b16a8e1e80b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ade33cf1094f160ac89f17b16a8e1e80b}


Definition at line 1415 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1417 \{
1418     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_lock"};
1419     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1420         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1421     \}
1422     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1423         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
1424     \}
1425     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) == gtid ) \{
1426         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsAlreadyOwned, func );
1427     \}
1428 
1429     \hyperlink{kmp__lock_8cpp_ad1d774b33df1b6c5eb34ffbef15d2898}{\_\_kmp\_acquire\_queuing\_lock}( lck, gtid );
1430 
1431     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = gtid + 1;
1432     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
1433 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a1081f214daf0024f610101a119a755c3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a1081f214daf0024f610101a119a755c3}


Definition at line 134 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-create\-\_\-worker().


\begin{DoxyCode}
135 \{
136     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a90eda0b2a14f0587a36defe637acb8bd}{\_\_kmp\_acquire\_tas\_lock\_timed\_template}( lck, gtid );
137 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a90eda0b2a14f0587a36defe637acb8bd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template}]{\setlength{\rightskip}{0pt plus 5cm}static \-\_\-\-\_\-forceinline {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-timed\-\_\-template (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a90eda0b2a14f0587a36defe637acb8bd}


Definition at line 88 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock().


\begin{DoxyCode}
89 \{
90     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
91 
92 \textcolor{preprocessor}{#ifdef USE\_LOCK\_PROFILE}
93 \textcolor{preprocessor}{}    kmp\_uint32 curr = \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} );
94     \textcolor{keywordflow}{if} ( ( curr != 0 ) && ( curr != gtid + 1 ) )
95         \hyperlink{kmp__io_8c_ac0b96ed999ee9819c544e6f24057da91}{\_\_kmp\_printf}( \textcolor{stringliteral}{"LOCK CONTENTION: %p\(\backslash\)n"}, lck );
96     \textcolor{comment}{/* else \_\_kmp\_printf( "." );*/}
97 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* USE\_LOCK\_PROFILE */}\textcolor{preprocessor}{}
98 \textcolor{preprocessor}{}
99     \textcolor{keywordflow}{if} ( ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} == \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas) )
100       && \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( & ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.
      \hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} ), \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas), \hyperlink{kmp__lock_8h_aecbb6c8547c1ac532886145c1308afd6}{KMP\_LOCK\_BUSY}(gtid+1, tas) ) ) \{
101         \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
102         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
103     \}
104 
105     kmp\_uint32 spins;
106     \hyperlink{kmp__itt_8h_a186799e882a28455ba75207cc8b5dbbb}{KMP\_FSYNC\_PREPARE}( lck );
107     \hyperlink{kmp_8h_a98cb21bfd34ebd451007a151f135b31c}{KMP\_INIT\_YIELD}( spins );
108     \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( \hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth} ) > ( \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? 
      \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} :
109       \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc} ) ) \{
110         \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}( \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
111     \}
112     \textcolor{keywordflow}{else} \{
113         \hyperlink{kmp_8h_a0b31ac108fea7d8034ea5145d74a7a77}{KMP\_YIELD\_SPIN}( spins );
114     \}
115 
116     \textcolor{keywordflow}{while} ( ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} != \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas) ) ||
117       ( ! \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( & ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.
      \hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} ), \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas), \hyperlink{kmp__lock_8h_aecbb6c8547c1ac532886145c1308afd6}{KMP\_LOCK\_BUSY}(gtid+1, tas) ) ) ) \{
118         \textcolor{comment}{//}
119         \textcolor{comment}{// FIXME - use exponential backoff here}
120         \textcolor{comment}{//}
121         \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( \hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth} ) > ( \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? 
      \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} :
122           \_\_kmp\_xproc ) ) \{
123             \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}( \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
124         \}
125         \textcolor{keywordflow}{else} \{
126             \hyperlink{kmp_8h_a0b31ac108fea7d8034ea5145d74a7a77}{KMP\_YIELD\_SPIN}( spins );
127         \}
128     \}
129     \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}( lck );
130     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
131 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_adca5fc5b895642eb2bd6dc7372b4d4d5}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_adca5fc5b895642eb2bd6dc7372b4d4d5}


Definition at line 140 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
141 \{
142     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_lock"};
143     \textcolor{keywordflow}{if} ( ( \textcolor{keyword}{sizeof} ( \hyperlink{unionkmp__tas__lock}{kmp\_tas\_lock\_t} ) <= \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} )
144       && \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
145         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
146     \}
147     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) == gtid ) ) \{
148         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsAlreadyOwned, func );
149     \}
150     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a1081f214daf0024f610101a119a755c3}{\_\_kmp\_acquire\_tas\_lock}( lck, gtid );
151 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aa542c57880dc230891c312d3e437cf4b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_aa542c57880dc230891c312d3e437cf4b}


Definition at line 767 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-bootstrap\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
768 \{
769     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_af17623be2b2324c4e59177af73d2e9df}{\_\_kmp\_acquire\_ticket\_lock\_timed\_template}( lck, gtid );
770 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af17623be2b2324c4e59177af73d2e9df}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template}]{\setlength{\rightskip}{0pt plus 5cm}static \-\_\-\-\_\-forceinline {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af17623be2b2324c4e59177af73d2e9df}


Definition at line 744 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock().


\begin{DoxyCode}
745 \{
746     kmp\_uint32 my\_ticket;
747     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
748 
749     my\_ticket = \hyperlink{kmp__os_8h_a201982f51ff23ad84ae6781ad4265e3a}{KMP\_TEST\_THEN\_INC32}( (kmp\_int32 *) &lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.
      \hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket} );
750 
751 \textcolor{preprocessor}{#ifdef USE\_LOCK\_PROFILE}
752 \textcolor{preprocessor}{}    \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} ) != my\_ticket )
753         \hyperlink{kmp__io_8c_ac0b96ed999ee9819c544e6f24057da91}{\_\_kmp\_printf}( \textcolor{stringliteral}{"LOCK CONTENTION: %p\(\backslash\)n"}, lck );
754     \textcolor{comment}{/* else \_\_kmp\_printf( "." );*/}
755 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* USE\_LOCK\_PROFILE */}\textcolor{preprocessor}{}
756 \textcolor{preprocessor}{}
757     \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} ) == my\_ticket ) \{
758         \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
759         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
760     \}
761     \hyperlink{kmp__os_8h_a355e68ac2502d05ca4df8c3b20784dae}{KMP\_WAIT\_YIELD}( &lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving}, my\_ticket, 
      \hyperlink{kmp__lock_8cpp_a86c1ae7c1a6028e35d499a0317b7a229}{\_\_kmp\_bakery\_check}, lck );
762     \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
763     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
764 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a911af950cb940df53fef4b77cd305ce9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a911af950cb940df53fef4b77cd305ce9}


Definition at line 773 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
774 \{
775     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_set\_lock"};
776     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
777         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
778     \}
779     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
780         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
781     \}
782     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) == gtid ) ) \{
783         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsAlreadyOwned, func );
784     \}
785 
786     \hyperlink{kmp__lock_8cpp_aa542c57880dc230891c312d3e437cf4b}{\_\_kmp\_acquire\_ticket\_lock}( lck, gtid );
787 
788     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = gtid + 1;
789     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ab89de822d157d9ec1573337ec7f414bc}{KMP\_LOCK\_ACQUIRED\_FIRST};
790 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a86c1ae7c1a6028e35d499a0317b7a229}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check@{\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check}}
\index{\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check@{\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check}]{\setlength{\rightskip}{0pt plus 5cm}static kmp\-\_\-uint32 \-\_\-\-\_\-kmp\-\_\-bakery\-\_\-check (
\begin{DoxyParamCaption}
\item[{kmp\-\_\-uint32}]{value, }
\item[{kmp\-\_\-uint32}]{checker}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a86c1ae7c1a6028e35d499a0317b7a229}


Definition at line 732 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-timed\-\_\-template().


\begin{DoxyCode}
733 \{
734     \textcolor{keyword}{register} kmp\_uint32 pause;
735 
736     \textcolor{keywordflow}{if} (value == checker) \{
737         \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
738     \}
739     \textcolor{keywordflow}{for} (pause = checker - value; pause != 0; --pause);
740     \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
741 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ab6344f2921c6935ec0e25e8e26719ea9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks@{\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks}}
\index{\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks@{\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ab6344f2921c6935ec0e25e8e26719ea9}


Definition at line 4080 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-cleanup().


\begin{DoxyCode}
4081 \{
4082     \textcolor{comment}{//}
4083     \textcolor{comment}{// Reset lock pool. Do not worry about lock in the pool -- we will free}
4084     \textcolor{comment}{// them when iterating through lock table (it includes all the locks,}
4085     \textcolor{comment}{// dead or alive).}
4086     \textcolor{comment}{//}
4087     \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool} = NULL;
4088 
4089 \textcolor{preprocessor}{#define IS\_CRITICAL(lck) \(\backslash\)}
4090 \textcolor{preprocessor}{        ( ( \_\_kmp\_get\_user\_lock\_flags\_ != NULL ) && \(\backslash\)}
4091 \textcolor{preprocessor}{        ( ( *\_\_kmp\_get\_user\_lock\_flags\_ )( lck ) & kmp\_lf\_critical\_section ) )}
4092 \textcolor{preprocessor}{}
4093     \textcolor{comment}{//}
4094     \textcolor{comment}{// Loop through lock table, free all locks.}
4095     \textcolor{comment}{//}
4096     \textcolor{comment}{// Do not free item [0], it is reserved for lock tables list.}
4097     \textcolor{comment}{//}
4098     \textcolor{comment}{// FIXME - we are iterating through a list of (pointers to) objects of}
4099     \textcolor{comment}{// type union kmp\_user\_lock, but we have no way of knowing whether the}
4100     \textcolor{comment}{// base type is currently "pool" or whatever the global user lock type}
4101     \textcolor{comment}{// is.}
4102     \textcolor{comment}{//}
4103     \textcolor{comment}{// We are relying on the fact that for all of the user lock types}
4104     \textcolor{comment}{// (except "tas"), the first field in the lock struct is the "initialized"}
4105     \textcolor{comment}{// field, which is set to the address of the lock object itself when}
4106     \textcolor{comment}{// the lock is initialized.  When the union is of type "pool", the}
4107     \textcolor{comment}{// first field is a pointer to the next object in the free list, which}
4108     \textcolor{comment}{// will not be the same address as the object itself.}
4109     \textcolor{comment}{//}
4110     \textcolor{comment}{// This means that the check ( *\_\_kmp\_is\_user\_lock\_initialized\_ )( lck )}
4111     \textcolor{comment}{// will fail for "pool" objects on the free list.  This must happen as}
4112     \textcolor{comment}{// the "location" field of real user locks overlaps the "index" field}
4113     \textcolor{comment}{// of "pool" objects.}
4114     \textcolor{comment}{//}
4115     \textcolor{comment}{// It would be better to run through the free list, and remove all "pool"}
4116     \textcolor{comment}{// objects from the lock table before executing this loop.  However,}
4117     \textcolor{comment}{// "pool" objects do not always have their index field set (only on}
4118     \textcolor{comment}{// lin\_32e), and I don't want to search the lock table for the address}
4119     \textcolor{comment}{// of every "pool" object on the free list.}
4120     \textcolor{comment}{//}
4121     \textcolor{keywordflow}{while} ( \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} > 1 ) \{
4122         \textcolor{keyword}{const} \hyperlink{structident}{ident} *loc;
4123 
4124         \textcolor{comment}{//}
4125         \textcolor{comment}{// reduce \_\_kmp\_user\_lock\_table.used before freeing the lock,}
4126         \textcolor{comment}{// so that state of locks is consistent}
4127         \textcolor{comment}{//}
4128         \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} lck = \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table}[
4129           --\hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} ];
4130 
4131         \textcolor{keywordflow}{if} ( ( \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} != NULL ) &&
4132           ( *\hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} )( lck ) ) \{
4133             \textcolor{comment}{//}
4134             \textcolor{comment}{// Issue a warning if: KMP\_CONSISTENCY\_CHECK AND lock is}
4135             \textcolor{comment}{// initialized AND it is NOT a critical section (user is not}
4136             \textcolor{comment}{// responsible for destroying criticals) AND we know source}
4137             \textcolor{comment}{// location to report.}
4138             \textcolor{comment}{//}
4139             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} && ( ! 
      \hyperlink{kmp__lock_8cpp_a990ed2e70e7d9ab777669182f6584c64}{IS\_CRITICAL}( lck ) ) &&
4140               ( ( loc = \hyperlink{kmp__lock_8h_aeffc37d4eb33c121bd42ad94983319c3}{\_\_kmp\_get\_user\_lock\_location}( lck ) ) != NULL ) &&
4141               ( loc->\hyperlink{structident_a8c2ccc106967f36d7191d59d4d5a65dc}{psource} != NULL ) ) \{
4142                 \hyperlink{structkmp__str__loc}{kmp\_str\_loc\_t} str\_loc = \hyperlink{kmp__str_8c_ac2574a4e4edede90eb9760a316906b39}{\_\_kmp\_str\_loc\_init}( loc->
      \hyperlink{structident_a8c2ccc106967f36d7191d59d4d5a65dc}{psource}, 0 );
4143                 \hyperlink{kmp__i18n_8h_a5aeb48e92a07c52661a33ec3fcee938f}{KMP\_WARNING}( CnsLockNotDestroyed, str\_loc.\hyperlink{structkmp__str__loc_a58c65f1c3edba40b585cc6b00525e9e2}{file}, str\_loc.
      \hyperlink{structkmp__str__loc_a225be91d4582b0393c41f1fbfdbea683}{line} );
4144                 \hyperlink{kmp__str_8c_aab8c2f8026281698b07283fb20645a8f}{\_\_kmp\_str\_loc\_free}( &str\_loc);
4145             \}
4146 
4147 \textcolor{preprocessor}{#ifdef KMP\_DEBUG}
4148 \textcolor{preprocessor}{}            \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a990ed2e70e7d9ab777669182f6584c64}{IS\_CRITICAL}( lck ) ) \{
4149                 \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 20, (\textcolor{stringliteral}{"\_\_kmp\_cleanup\_user\_locks: free critical section lock %p (%p)\(\backslash\)n"}, 
      lck, *(\textcolor{keywordtype}{void}**)lck ) );
4150             \}
4151             \textcolor{keywordflow}{else} \{
4152                 \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 20, (\textcolor{stringliteral}{"\_\_kmp\_cleanup\_user\_locks: free lock %p (%p)\(\backslash\)n"}, lck, *(\textcolor{keywordtype}{void}**)lck )
       );
4153             \}
4154 \textcolor{preprocessor}{#endif // KMP\_DEBUG}
4155 \textcolor{preprocessor}{}
4156             \textcolor{comment}{//}
4157             \textcolor{comment}{// Cleanup internal lock dynamic resources}
4158             \textcolor{comment}{// (for drdpa locks particularly).}
4159             \textcolor{comment}{//}
4160             \hyperlink{kmp__lock_8h_a61b5b958a146722f3ccc64c9a21d7437}{\_\_kmp\_destroy\_user\_lock}( lck );
4161         \}
4162 
4163         \textcolor{comment}{//}
4164         \textcolor{comment}{// Free the lock if block allocation of locks is not used.}
4165         \textcolor{comment}{//}
4166         \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks} == NULL ) \{
4167             \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}( lck );
4168         \}
4169     \}
4170 
4171 \textcolor{preprocessor}{#undef IS\_CRITICAL}
4172 \textcolor{preprocessor}{}
4173     \textcolor{comment}{//}
4174     \textcolor{comment}{// delete lock table(s).}
4175     \textcolor{comment}{//}
4176     \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *table\_ptr = \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table};
4177     \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table} = NULL;
4178     \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} = 0;
4179 
4180     \textcolor{keywordflow}{while} ( table\_ptr != NULL ) \{
4181         \textcolor{comment}{//}
4182         \textcolor{comment}{// In the first element we saved the pointer to the previous}
4183         \textcolor{comment}{// (smaller) lock table.}
4184         \textcolor{comment}{//}
4185         \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *next = (\hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *)( table\_ptr[ 0 ] );
4186         \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}( table\_ptr );
4187         table\_ptr = next;
4188     \}
4189 
4190     \textcolor{comment}{//}
4191     \textcolor{comment}{// Free buffers allocated for blocks of locks.}
4192     \textcolor{comment}{//}
4193     \hyperlink{structkmp__block__of__locks}{kmp\_block\_of\_locks\_t} *block\_ptr = \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks};
4194     \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks} = NULL;
4195 
4196     \textcolor{keywordflow}{while} ( block\_ptr != NULL ) \{
4197         \hyperlink{structkmp__block__of__locks}{kmp\_block\_of\_locks\_t} *next = block\_ptr->\hyperlink{structkmp__block__of__locks_acd79fe8422ca10aef0f7a31340f2bd5d}{next\_block};
4198         \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}( block\_ptr->\hyperlink{structkmp__block__of__locks_a03913a2aa7c0f08a912fe7457b0edc1d}{locks} );
4199         \textcolor{comment}{//}
4200         \textcolor{comment}{// *block\_ptr itself was allocated at the end of the locks vector.}
4201         \textcolor{comment}{//}
4202         block\_ptr = next;
4203     \}
4204 
4205     \hyperlink{kmp__os_8h_ae67779cc7794b5dd7eee4c7f2c7789d4}{TCW\_4}(\hyperlink{kmp_8h_a06dca6ee024848d88e7a69d5df512e65}{\_\_kmp\_init\_user\_locks}, \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
4206 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}


Definition at line 2796 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
2797 \{
2798     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} = NULL;
2799     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aab9a244dfedf0a444df2955caff8ea7f}{location}    = NULL;
2800     \textcolor{keywordflow}{if} (lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls} != NULL) \{
2801         \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}((\textcolor{keywordtype}{void} *)lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls});
2802         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls} = NULL;
2803     \}
2804     \textcolor{keywordflow}{if} (lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} != NULL) \{
2805         \hyperlink{kmp_8h_a052396231429341ba56a7c1ceacbaa2f}{\_\_kmp\_free}((\textcolor{keywordtype}{void} *)lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls});
2806         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} = NULL;
2807     \}
2808     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask} = 0;
2809     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls} = 0;
2810     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a6b95d65ec5cc5135a0eed70eafdc11ed}{cleanup\_ticket} = 0;
2811     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket} = 0;
2812     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a5b614d7eb0d32b3ce7e9412aa6ac24d6}{now\_serving} = 0;
2813     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = 0;
2814     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = -1;
2815 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a90dc8876d306d1884e1bd025ebe60dc6}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a90dc8876d306d1884e1bd025ebe60dc6}


Definition at line 2818 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2819 \{
2820     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_lock"};
2821     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2822         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2823     \}
2824     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2825         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
2826     \}
2827     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) != -1 ) \{
2828         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
2829     \}
2830     \hyperlink{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}{\_\_kmp\_destroy\_drdpa\_lock}( lck );
2831 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a4014554e8a4e2f4a56ca51fa46969d9a}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a4014554e8a4e2f4a56ca51fa46969d9a}


Definition at line 2954 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2955 \{
2956     \hyperlink{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}{\_\_kmp\_destroy\_drdpa\_lock}( lck );
2957     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = 0;
2958 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a5781ee760b6f7da25a95cca6fee80172}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a5781ee760b6f7da25a95cca6fee80172}


Definition at line 2961 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2962 \{
2963     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_nest\_lock"};
2964     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2965         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2966     \}
2967     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2968         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
2969     \}
2970     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) != -1 ) \{
2971         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
2972     \}
2973     \hyperlink{kmp__lock_8cpp_a4014554e8a4e2f4a56ca51fa46969d9a}{\_\_kmp\_destroy\_nested\_drdpa\_lock}( lck );
2974 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_abc2b4753850f11019fc15a6d60c8407f}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_abc2b4753850f11019fc15a6d60c8407f}


Definition at line 1821 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1822 \{
1823     \hyperlink{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}{\_\_kmp\_destroy\_queuing\_lock}( lck );
1824     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} = 0;
1825 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af424bf33c21ccab7b5c475df32f895ce}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af424bf33c21ccab7b5c475df32f895ce}


Definition at line 1828 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1829 \{
1830     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_nest\_lock"};
1831     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1832         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1833     \}
1834     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1835         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1836     \}
1837     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) != -1 ) \{
1838         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
1839     \}
1840     \hyperlink{kmp__lock_8cpp_abc2b4753850f11019fc15a6d60c8407f}{\_\_kmp\_destroy\_nested\_queuing\_lock}( lck );
1841 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ab54c52481f17ea6854bb26d9df4608d8}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ab54c52481f17ea6854bb26d9df4608d8}


Definition at line 345 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
346 \{
347     \hyperlink{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}{\_\_kmp\_destroy\_tas\_lock}( lck );
348     lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} = 0;
349 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a05e58bb87b617845e07f6f1bf1022224}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a05e58bb87b617845e07f6f1bf1022224}


Definition at line 352 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
353 \{
354     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_nest\_lock"};
355     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
356         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
357     \}
358     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) != -1 ) \{
359         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
360     \}
361     \hyperlink{kmp__lock_8cpp_ab54c52481f17ea6854bb26d9df4608d8}{\_\_kmp\_destroy\_nested\_tas\_lock}( lck );
362 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_afec79550bad550c65518370caaff68b4}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_afec79550bad550c65518370caaff68b4}


Definition at line 1033 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1034 \{
1035     \hyperlink{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}{\_\_kmp\_destroy\_ticket\_lock}( lck );
1036     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = 0;
1037 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a807fd9e0a7782840cd5d18970d11baa9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a807fd9e0a7782840cd5d18970d11baa9}


Definition at line 1040 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1041 \{
1042     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_nest\_lock"};
1043     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
1044         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1045     \}
1046     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
1047         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1048     \}
1049     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) != -1 ) \{
1050         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
1051     \}
1052     \hyperlink{kmp__lock_8cpp_afec79550bad550c65518370caaff68b4}{\_\_kmp\_destroy\_nested\_ticket\_lock}( lck );
1053 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}


Definition at line 1671 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-atomic\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1672 \{
1673     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} = NULL;
1674     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a68cbb904df318e4e669d1ba3b1562c56}{location} = NULL;
1675     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7394dd8dc4fcc01f0ca8acda1a2ac82a}{head\_id} = 0;
1676     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.tail\_id = 0;
1677     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a3fe180e67160e4ffc68fe94cd502e517}{next\_ticket} = 0;
1678     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aefbcb3d6e899551ed7ae3f2f7dfb4406}{now\_serving} = 0;
1679     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = 0;
1680     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} = -1;
1681 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a8c7d0c7e04ae9f130628ff0aeb1552dd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a8c7d0c7e04ae9f130628ff0aeb1552dd}


Definition at line 1684 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1685 \{
1686     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_lock"};
1687     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1688         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1689     \}
1690     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1691         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
1692     \}
1693     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) != -1 ) \{
1694         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
1695     \}
1696     \hyperlink{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}{\_\_kmp\_destroy\_queuing\_lock}( lck );
1697 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}


Definition at line 221 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
222 \{
223     lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} = 0;
224 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aad47e333c1f4f106d46aa9aeb05d7e44}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_aad47e333c1f4f106d46aa9aeb05d7e44}


Definition at line 227 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
228 \{
229     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_lock"};
230     \textcolor{keywordflow}{if} ( ( \textcolor{keyword}{sizeof} ( \hyperlink{unionkmp__tas__lock}{kmp\_tas\_lock\_t} ) <= \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} )
231       && \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
232         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
233     \}
234     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) != -1 ) \{
235         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
236     \}
237     \hyperlink{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}{\_\_kmp\_destroy\_tas\_lock}( lck );
238 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}


Definition at line 885 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-bootstrap\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
886 \{
887     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} = NULL;
888     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a0dba998d5ca5ad3494098a70ee5d067e}{location}    = NULL;
889     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket} = 0;
890     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} = 0;
891     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = 0;
892     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = -1;
893 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aabae1b0b6d9af23a942b6d7f1cd283d3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_aabae1b0b6d9af23a942b6d7f1cd283d3}


Definition at line 896 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
897 \{
898     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_destroy\_lock"};
899     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
900         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
901     \}
902     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
903         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
904     \}
905     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) != -1 ) \{
906         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockStillOwned, func );
907     \}
908     \hyperlink{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}{\_\_kmp\_destroy\_ticket\_lock}( lck );
909 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a51b058c74beed1de5d14e8db705519cc}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf kmp\-\_\-lock\-\_\-flags\-\_\-t} \-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a51b058c74beed1de5d14e8db705519cc}


Definition at line 3000 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
3001 \{
3002     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags};
3003 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a505ed8bf2d06a8cd74e3c0409ccf91cb}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static const {\bf ident\-\_\-t}$\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a505ed8bf2d06a8cd74e3c0409ccf91cb}


Definition at line 2988 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
2989 \{
2990     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aab9a244dfedf0a444df2955caff8ea7f}{location};
2991 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner}]{\setlength{\rightskip}{0pt plus 5cm}static kmp\-\_\-int32 \-\_\-\-\_\-kmp\-\_\-get\-\_\-drdpa\-\_\-lock\-\_\-owner (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}


Definition at line 2470 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock().


\begin{DoxyCode}
2471 \{
2472     \textcolor{keywordflow}{return} \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} ) - 1;
2473 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aedca2aad3b326e978793f8d008d8ce4e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf kmp\-\_\-lock\-\_\-flags\-\_\-t} \-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_aedca2aad3b326e978793f8d008d8ce4e}


Definition at line 1867 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1868 \{
1869     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7a852c13f6838e44d2ef503d98420f2c}{flags};
1870 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a3bb2a5e779ce7f98cf0e2851bb78b025}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static const {\bf ident\-\_\-t}$\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a3bb2a5e779ce7f98cf0e2851bb78b025}


Definition at line 1855 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1856 \{
1857     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a68cbb904df318e4e669d1ba3b1562c56}{location};
1858 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner}]{\setlength{\rightskip}{0pt plus 5cm}static kmp\-\_\-int32 \-\_\-\-\_\-kmp\-\_\-get\-\_\-queuing\-\_\-lock\-\_\-owner (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}


Definition at line 1194 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock().


\begin{DoxyCode}
1195 \{
1196     \textcolor{keywordflow}{return} \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} ) - 1;
1197 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner}]{\setlength{\rightskip}{0pt plus 5cm}static kmp\-\_\-int32 \-\_\-\-\_\-kmp\-\_\-get\-\_\-tas\-\_\-lock\-\_\-owner (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}


Definition at line 76 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock().


\begin{DoxyCode}
77 \{
78     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a99d674b9c4effceb75af4e22c53dc93d}{KMP\_LOCK\_STRIP}(\hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} )) - 1;
79 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af46aee05fcd8cc61c645e688c07e5843}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf kmp\-\_\-lock\-\_\-flags\-\_\-t} \-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af46aee05fcd8cc61c645e688c07e5843}


Definition at line 1079 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1080 \{
1081     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2de50496ac13d01017bc079a5bcf09ff}{flags};
1082 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a796613f4e112e671712f9e2f1abd1099}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static const {\bf ident\-\_\-t}$\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a796613f4e112e671712f9e2f1abd1099}


Definition at line 1067 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1068 \{
1069     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a0dba998d5ca5ad3494098a70ee5d067e}{location};
1070 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner}]{\setlength{\rightskip}{0pt plus 5cm}static kmp\-\_\-int32 \-\_\-\-\_\-kmp\-\_\-get\-\_\-ticket\-\_\-lock\-\_\-owner (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}


Definition at line 720 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock().


\begin{DoxyCode}
721 \{
722     \textcolor{keywordflow}{return} \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} ) - 1;
723 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ac1b2df3e3b7ca930b8fc3cbfb9a5c76b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ac1b2df3e3b7ca930b8fc3cbfb9a5c76b}


Definition at line 2771 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock().


\begin{DoxyCode}
2772 \{
2773     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aab9a244dfedf0a444df2955caff8ea7f}{location} = NULL;
2774     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask} = 0;
2775     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls} = 1;
2776     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls} = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll}
       *)
2777       \hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aae7fd55506d696cd2e4aaf509c90bd08}{num\_polls} * \textcolor{keyword}{sizeof}(*(lck->
      \hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls})));
2778     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a6b95d65ec5cc5135a0eed70eafdc11ed}{cleanup\_ticket} = 0;
2779     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a1debd4e500c7c07e8943125d5d230555}{old\_polls} = NULL;
2780     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket} = 0;
2781     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a5b614d7eb0d32b3ce7e9412aa6ac24d6}{now\_serving} = 0;
2782     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = 0;      \textcolor{comment}{// no thread owns the lock.}
2783     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = -1; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks.}
2784     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} = lck;
2785 
2786     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_init\_drdpa\_lock: lock %p initialized\(\backslash\)n"}, lck));
2787 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a74a9e1c22990aa4d56514d22ed017ea9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a74a9e1c22990aa4d56514d22ed017ea9}


Definition at line 2790 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2791 \{
2792     \hyperlink{kmp__lock_8cpp_ac1b2df3e3b7ca930b8fc3cbfb9a5c76b}{\_\_kmp\_init\_drdpa\_lock}( lck );
2793 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a3dd5913d184644e4bf4575ad8ad9955f}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a3dd5913d184644e4bf4575ad8ad9955f}


Definition at line 2941 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2942 \{
2943     \hyperlink{kmp__lock_8cpp_ac1b2df3e3b7ca930b8fc3cbfb9a5c76b}{\_\_kmp\_init\_drdpa\_lock}( lck );
2944     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = 0; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks}
2945 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a09408ebf48c74166bf8c6a03c2c14241}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a09408ebf48c74166bf8c6a03c2c14241}


Definition at line 2948 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2949 \{
2950     \hyperlink{kmp__lock_8cpp_a3dd5913d184644e4bf4575ad8ad9955f}{\_\_kmp\_init\_nested\_drdpa\_lock}( lck );
2951 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a91cef94027193d6fce5dc7214b7e4cf4}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a91cef94027193d6fce5dc7214b7e4cf4}


Definition at line 1808 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1809 \{
1810     \hyperlink{kmp__lock_8cpp_a0869739ab886c0aca60907b410b6d3c3}{\_\_kmp\_init\_queuing\_lock}( lck );
1811     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} = 0; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks}
1812 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a1bd738f66f1fb1060859bb2d4a7f57c4}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a1bd738f66f1fb1060859bb2d4a7f57c4}


Definition at line 1815 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1816 \{
1817     \hyperlink{kmp__lock_8cpp_a91cef94027193d6fce5dc7214b7e4cf4}{\_\_kmp\_init\_nested\_queuing\_lock}( lck );
1818 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a1ce89a76d1bc57c7e8f3fe28c7cc8b5d}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a1ce89a76d1bc57c7e8f3fe28c7cc8b5d}


Definition at line 332 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
333 \{
334     \hyperlink{kmp__lock_8cpp_a6910bddf07333ffb43a964b0c1024cc9}{\_\_kmp\_init\_tas\_lock}( lck );
335     lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} = 0; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks}
336 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a952df1cf45471858e329cd5bed3c1e44}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a952df1cf45471858e329cd5bed3c1e44}


Definition at line 339 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
340 \{
341     \hyperlink{kmp__lock_8cpp_a1ce89a76d1bc57c7e8f3fe28c7cc8b5d}{\_\_kmp\_init\_nested\_tas\_lock}( lck );
342 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a52e2d9c13833e285fbdb399910d7cb81}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a52e2d9c13833e285fbdb399910d7cb81}


Definition at line 1020 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1021 \{
1022     \hyperlink{kmp__lock_8cpp_a8360eff68dcfb40f79905d2c1a40b858}{\_\_kmp\_init\_ticket\_lock}( lck );
1023     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = 0; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks}
1024 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a271c9dd74b9c9cf1b7e94bbf0155b9b9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a271c9dd74b9c9cf1b7e94bbf0155b9b9}


Definition at line 1027 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1028 \{
1029     \hyperlink{kmp__lock_8cpp_a52e2d9c13833e285fbdb399910d7cb81}{\_\_kmp\_init\_nested\_ticket\_lock}( lck );
1030 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a0869739ab886c0aca60907b410b6d3c3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a0869739ab886c0aca60907b410b6d3c3}


Definition at line 1650 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-do\-\_\-serial\-\_\-initialize(), \-\_\-\-\_\-kmp\-\_\-init\-\_\-atomic\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-queuing\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1651 \{
1652     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a68cbb904df318e4e669d1ba3b1562c56}{location} = NULL;
1653     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7394dd8dc4fcc01f0ca8acda1a2ac82a}{head\_id} = 0;
1654     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.tail\_id = 0;
1655     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a3fe180e67160e4ffc68fe94cd502e517}{next\_ticket} = 0;
1656     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aefbcb3d6e899551ed7ae3f2f7dfb4406}{now\_serving} = 0;
1657     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = 0;      \textcolor{comment}{// no thread owns the lock.}
1658     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} = -1; \textcolor{comment}{// >= 0 for nestable locks, -1 for simple locks.}
1659     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} = lck;
1660 
1661     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_init\_queuing\_lock: lock %p initialized\(\backslash\)n"}, lck));
1662 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a64d217a317cf74d8c872f1174249c947}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a64d217a317cf74d8c872f1174249c947}


Definition at line 1665 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1666 \{
1667     \hyperlink{kmp__lock_8cpp_a0869739ab886c0aca60907b410b6d3c3}{\_\_kmp\_init\_queuing\_lock}( lck );
1668 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a6910bddf07333ffb43a964b0c1024cc9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a6910bddf07333ffb43a964b0c1024cc9}


Definition at line 209 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-do\-\_\-serial\-\_\-initialize(), \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-tas\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
210 \{
211     \hyperlink{kmp__os_8h_ae67779cc7794b5dd7eee4c7f2c7789d4}{TCW\_4}( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll}, \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas) );
212 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a93a728a902b1143af1d46caf104b51fd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a93a728a902b1143af1d46caf104b51fd}


Definition at line 215 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
216 \{
217     \hyperlink{kmp__lock_8cpp_a6910bddf07333ffb43a964b0c1024cc9}{\_\_kmp\_init\_tas\_lock}( lck );
218 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a8360eff68dcfb40f79905d2c1a40b858}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a8360eff68dcfb40f79905d2c1a40b858}


Definition at line 868 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-bootstrap\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-init\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-ticket\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
869 \{
870     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a0dba998d5ca5ad3494098a70ee5d067e}{location} = NULL;
871     \hyperlink{kmp__os_8h_ae67779cc7794b5dd7eee4c7f2c7789d4}{TCW\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket}, 0 );
872     \hyperlink{kmp__os_8h_ae67779cc7794b5dd7eee4c7f2c7789d4}{TCW\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving}, 0 );
873     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = 0;      \textcolor{comment}{// no thread owns the lock.}
874     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = -1; \textcolor{comment}{// -1 => not a nested lock.}
875     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} = (\hyperlink{unionkmp__ticket__lock}{kmp\_ticket\_lock} *)lck;
876 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a57519a5034947b84bc89cb61943bf28e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-init\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a57519a5034947b84bc89cb61943bf28e}


Definition at line 879 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
880 \{
881     \hyperlink{kmp__lock_8cpp_a8360eff68dcfb40f79905d2c1a40b858}{\_\_kmp\_init\_ticket\_lock}( lck );
882 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af8bbf205604614376e6ed6eceb3043b3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-initialized (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af8bbf205604614376e6ed6eceb3043b3}


Definition at line 2982 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
2983 \{
2984     \textcolor{keywordflow}{return} lck == lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized};
2985 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable}]{\setlength{\rightskip}{0pt plus 5cm}static bool \-\_\-\-\_\-kmp\-\_\-is\-\_\-drdpa\-\_\-lock\-\_\-nestable (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}


Definition at line 2476 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2477 \{
2478     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} != -1;
2479 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a10f938d5fa98d18caa87a32917484c61}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-initialized (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a10f938d5fa98d18caa87a32917484c61}


Definition at line 1849 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1850 \{
1851     \textcolor{keywordflow}{return} lck == lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized};
1852 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable}]{\setlength{\rightskip}{0pt plus 5cm}static bool \-\_\-\-\_\-kmp\-\_\-is\-\_\-queuing\-\_\-lock\-\_\-nestable (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}


Definition at line 1200 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1201 \{
1202     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} != -1;
1203 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable}]{\setlength{\rightskip}{0pt plus 5cm}static bool \-\_\-\-\_\-kmp\-\_\-is\-\_\-tas\-\_\-lock\-\_\-nestable (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}


Definition at line 82 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
83 \{
84     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} != -1;
85 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a316f653461685c91019c91d17bb72079}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-initialized (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a316f653461685c91019c91d17bb72079}


Definition at line 1061 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1062 \{
1063     \textcolor{keywordflow}{return} lck == lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized};
1064 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable}]{\setlength{\rightskip}{0pt plus 5cm}static bool \-\_\-\-\_\-kmp\-\_\-is\-\_\-ticket\-\_\-lock\-\_\-nestable (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}


Definition at line 726 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
727 \{
728     \textcolor{keywordflow}{return} lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} != -1;
729 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9b19a714b89b607acf8c5fde8b4bedcd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate}}
\index{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf kmp\-\_\-user\-\_\-lock\-\_\-p} \-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a9b19a714b89b607acf8c5fde8b4bedcd}


Definition at line 3945 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate().


\begin{DoxyCode}
3946 \{
3947     \textcolor{comment}{// Assume that kmp\_global\_lock is held upon entry/exit.}
3948     \textcolor{keyword}{static} \textcolor{keywordtype}{int} last\_index = 0;
3949     \textcolor{keywordflow}{if} ( ( last\_index >= \hyperlink{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}{\_\_kmp\_num\_locks\_in\_block} )
3950       || ( \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks} == NULL ) ) \{
3951         \textcolor{comment}{// Restart the index.}
3952         last\_index = 0;
3953         \textcolor{comment}{// Need to allocate a new block.}
3954         \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} > 0 );
3955         \textcolor{keywordtype}{size\_t} space\_for\_locks = \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} * 
      \hyperlink{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}{\_\_kmp\_num\_locks\_in\_block};
3956         \textcolor{keywordtype}{char}* buffer = (\textcolor{keywordtype}{char}*)\hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}( space\_for\_locks + \textcolor{keyword}{sizeof}( 
      \hyperlink{structkmp__block__of__locks}{kmp\_block\_of\_locks} ) );
3957         \textcolor{comment}{// Set up the new block.}
3958         \hyperlink{structkmp__block__of__locks}{kmp\_block\_of\_locks} *new\_block = (\hyperlink{structkmp__block__of__locks}{kmp\_block\_of\_locks} *)(& buffer
      [space\_for\_locks]);
3959         new\_block->\hyperlink{structkmp__block__of__locks_acd79fe8422ca10aef0f7a31340f2bd5d}{next\_block} = \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks};
3960         new\_block->\hyperlink{structkmp__block__of__locks_a03913a2aa7c0f08a912fe7457b0edc1d}{locks} = (\textcolor{keywordtype}{void} *)buffer;
3961         \textcolor{comment}{// Publish the new block.}
3962         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
3963         \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks} = new\_block;
3964     \}
3965     \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} ret = (\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p})(& ( ( (\textcolor{keywordtype}{char} *)( 
      \hyperlink{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\_\_kmp\_lock\_blocks}->\hyperlink{structkmp__block__of__locks_a03913a2aa7c0f08a912fe7457b0edc1d}{locks} ) )
3966       [ last\_index * \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} ] ) );
3967     last\_index++;
3968     \textcolor{keywordflow}{return} ret;
3969 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae5504ced69ec77de5e5dbb42b1d3bf76}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert}}
\index{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf kmp\-\_\-lock\-\_\-index\-\_\-t} \-\_\-\-\_\-kmp\-\_\-lock\-\_\-table\-\_\-insert (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-user\-\_\-lock\-\_\-p}}]{lck}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ae5504ced69ec77de5e5dbb42b1d3bf76}


Definition at line 3913 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate().


\begin{DoxyCode}
3914 \{
3915     \textcolor{comment}{// Assume that kmp\_global\_lock is held upon entry/exit.}
3916     \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} index;
3917     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} >= 
      \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} ) \{
3918         \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} \hyperlink{ittnotify__static_8h_a5a1daa0c1d342747e3884fa54fc64fb1}{size};
3919         \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *table;
3920         \textcolor{comment}{// Reallocate lock table.}
3921         \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} == 0 ) \{
3922             size = 1024;
3923         \}
3924         \textcolor{keywordflow}{else} \{
3925             size = \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} * 2;
3926         \}
3927         table = (\hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *)\hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}( \textcolor{keyword}{sizeof}( 
      \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} ) * \hyperlink{ittnotify__static_8h_a5a1daa0c1d342747e3884fa54fc64fb1}{size} );
3928         \hyperlink{kmp__safe__c__api_8h_ab63a75e8bb537bb3ae55c05d0a3b7ca0}{KMP\_MEMCPY}( table + 1, \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table} + 1, \textcolor{keyword}{sizeof}( \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} ) * ( 
      \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} - 1 ) );
3929         table[ 0 ] = (\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p})\hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table};
3930             \textcolor{comment}{// We cannot free the previous table now, since it may be in use by other}
3931             \textcolor{comment}{// threads. So save the pointer to the previous table in in the first element of the}
3932             \textcolor{comment}{// new table. All the tables will be organized into a list, and could be freed when}
3933             \textcolor{comment}{// library shutting down.}
3934         \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table} = table;
3935         \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} = size;
3936     \}
3937     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} < \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a39d3ce64fcbf71b41c2b3ac1dccbb05a}{allocated} );
3938     index = \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used};
3939     \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table}[ index ] = lck;
3940     ++ \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used};
3941     \textcolor{keywordflow}{return} index;
3942 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9f1ad5ed1f7644fa070c0952a8b62e67}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-user\-\_\-lock\-\_\-p} \-\_\-\-\_\-kmp\-\_\-lookup\-\_\-user\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$$\ast$}]{user\-\_\-lock, }
\item[{char const $\ast$}]{func}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a9f1ad5ed1f7644fa070c0952a8b62e67}


Definition at line 4045 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-set\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-set\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-test\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-test\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-unset\-\_\-lock(), and \-\_\-\-\_\-kmpc\-\_\-unset\-\_\-nest\-\_\-lock().


\begin{DoxyCode}
4046 \{
4047     \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} lck = NULL;
4048 
4049     \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
4050         \textcolor{keywordflow}{if} ( user\_lock == NULL ) \{
4051             \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
4052         \}
4053     \}
4054 
4055     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} < \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) ) \{
4056         \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} index = *( (\hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} *)user\_lock );
4057         \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
4058             \textcolor{keywordflow}{if} ( ! ( 0 < index && index < \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.
      \hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} ) ) \{
4059                 \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
4060             \}
4061         \}
4062         \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( 0 < index && index < 
      \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} );
4063         \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} > 0 );
4064         lck = \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a89b0c01b5aebf4417258655f6d55ff16}{table}[index];
4065     \}
4066     \textcolor{keywordflow}{else} \{
4067         lck = *( (\hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *)user\_lock );
4068     \}
4069 
4070     \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
4071         \textcolor{keywordflow}{if} ( lck == NULL ) \{
4072             \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
4073         \}
4074     \}
4075 
4076     \textcolor{keywordflow}{return} lck;
4077 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a866a2afd8eed86955bd2953c53d18b4d}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a866a2afd8eed86955bd2953c53d18b4d}


Definition at line 2729 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock().


\begin{DoxyCode}
2730 \{
2731     \textcolor{comment}{//}
2732     \textcolor{comment}{// Read the ticket value from the lock data struct, then the polls}
2733     \textcolor{comment}{// pointer and the mask.  The polls pointer must be read before the}
2734     \textcolor{comment}{// mask!!! (See above)}
2735     \textcolor{comment}{//}
2736     kmp\_uint64 ticket = lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a5b614d7eb0d32b3ce7e9412aa6ac24d6}{now\_serving} + 1;        \textcolor{comment}{// non-volatile load}
2737     \textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *
      \hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls}
2738       = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *)
2739       \hyperlink{kmp__os_8h_a6e40f65c18c7b47fb612607b9bf8fdfc}{TCR\_PTR}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls});                           \textcolor{comment}{// volatile load}
2740     kmp\_uint64 \hyperlink{ittnotify__static_8h_aa2c7de905e06240a7170f2a0da3a5abf}{mask} = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask});              \textcolor{comment}{// volatile load}
2741     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_release\_drdpa\_lock: ticket #%lld released lock %p\(\backslash\)n"},
2742        ticket - 1, lck));
2743     \hyperlink{kmp__itt_8h_a321c5d523f392e432350caffc38aecee}{KMP\_FSYNC\_RELEASING}(lck);
2744     \hyperlink{kmp__os_8h_ab2bb533e194c5663f525ad7283463e3b}{KMP\_ST\_REL64}(&(polls[ticket & mask].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll}), ticket); \textcolor{comment}{// volatile store}
2745     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
2746 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae045df4e2caa6fa607d86275769332e2}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ae045df4e2caa6fa607d86275769332e2}


Definition at line 2749 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2750 \{
2751     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_lock"};
2752     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
2753     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2754         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2755     \}
2756     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2757         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
2758     \}
2759     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) == -1 ) \{
2760         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
2761     \}
2762     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) >= 0 )
2763       && ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) != gtid ) ) \{
2764         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
2765     \}
2766     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = 0;
2767     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a866a2afd8eed86955bd2953c53d18b4d}{\_\_kmp\_release\_drdpa\_lock}( lck, gtid );
2768 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9635a8939b0932ce57e50f483f007772}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a9635a8939b0932ce57e50f483f007772}


Definition at line 2906 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2907 \{
2908     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
2909 
2910     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2911     \textcolor{keywordflow}{if} ( --(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked}) == 0 ) \{
2912         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2913         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = 0;
2914         \hyperlink{kmp__lock_8cpp_a866a2afd8eed86955bd2953c53d18b4d}{\_\_kmp\_release\_drdpa\_lock}( lck, gtid );
2915         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
2916     \}
2917     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ae91f331e3e0489d43a1ee3e4747b5821}{KMP\_LOCK\_STILL\_HELD};
2918 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a8204b5ee072f712bb171be70c36ff3fd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a8204b5ee072f712bb171be70c36ff3fd}


Definition at line 2921 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2922 \{
2923     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_nest\_lock"};
2924     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
2925     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2926         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2927     \}
2928     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2929         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
2930     \}
2931     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) == -1 ) \{
2932         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
2933     \}
2934     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) != gtid ) \{
2935         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
2936     \}
2937     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a9635a8939b0932ce57e50f483f007772}{\_\_kmp\_release\_nested\_drdpa\_lock}( lck, gtid );
2938 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a38243fd45b7b9b88063908da650b38e5}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a38243fd45b7b9b88063908da650b38e5}


Definition at line 1773 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1774 \{
1775     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1776 
1777     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1778     \textcolor{keywordflow}{if} ( --(lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked}) == 0 ) \{
1779         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1780         lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = 0;
1781         \hyperlink{kmp__lock_8cpp_a4ba248b5ce7375a2426f3c38b091b3c9}{\_\_kmp\_release\_queuing\_lock}( lck, gtid );
1782         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
1783     \}
1784     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ae91f331e3e0489d43a1ee3e4747b5821}{KMP\_LOCK\_STILL\_HELD};
1785 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af2d68a5d37218d5b77e89225f4b3591c}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af2d68a5d37218d5b77e89225f4b3591c}


Definition at line 1788 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1789 \{
1790     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_nest\_lock"};
1791     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
1792     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1793         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1794     \}
1795     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1796         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1797     \}
1798     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) == -1 ) \{
1799         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
1800     \}
1801     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) != gtid ) \{
1802         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
1803     \}
1804     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a38243fd45b7b9b88063908da650b38e5}{\_\_kmp\_release\_nested\_queuing\_lock}( lck, gtid );
1805 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a2eade2551edf3616cd9afdfbe32de2e2}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a2eade2551edf3616cd9afdfbe32de2e2}


Definition at line 302 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
303 \{
304     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
305 
306     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
307     \textcolor{keywordflow}{if} ( --(lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked}) == 0 ) \{
308         \hyperlink{kmp__lock_8cpp_a70ab5cc7e70192354a19bd8e988633de}{\_\_kmp\_release\_tas\_lock}( lck, gtid );
309         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
310     \}
311     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ae91f331e3e0489d43a1ee3e4747b5821}{KMP\_LOCK\_STILL\_HELD};
312 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae71d01aac235b0c49d32e23140202cb3}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ae71d01aac235b0c49d32e23140202cb3}


Definition at line 315 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
316 \{
317     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_nest\_lock"};
318     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
319     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
320         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
321     \}
322     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) == -1 ) \{
323         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
324     \}
325     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) != gtid ) \{
326         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
327     \}
328     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a2eade2551edf3616cd9afdfbe32de2e2}{\_\_kmp\_release\_nested\_tas\_lock}( lck, gtid );
329 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ad48bc722675e410e313cede50ecd136b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ad48bc722675e410e313cede50ecd136b}


Definition at line 985 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
986 \{
987     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
988 
989     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
990     \textcolor{keywordflow}{if} ( --(lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked}) == 0 ) \{
991         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
992         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = 0;
993         \hyperlink{kmp__lock_8cpp_af7bfd10b1c098b8892beae42bb8a5248}{\_\_kmp\_release\_ticket\_lock}( lck, gtid );
994         \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
995     \}
996     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_ae91f331e3e0489d43a1ee3e4747b5821}{KMP\_LOCK\_STILL\_HELD};
997 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aa79feb6f042236e7facc2efe6c4fc6af}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_aa79feb6f042236e7facc2efe6c4fc6af}


Definition at line 1000 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1001 \{
1002     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_nest\_lock"};
1003     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
1004     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
1005         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1006     \}
1007     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
1008         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1009     \}
1010     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) == -1 ) \{
1011         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
1012     \}
1013     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) != gtid ) \{
1014         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
1015     \}
1016     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_ad48bc722675e410e313cede50ecd136b}{\_\_kmp\_release\_nested\_ticket\_lock}( lck, gtid );
1017 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a4ba248b5ce7375a2426f3c38b091b3c9}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a4ba248b5ce7375a2426f3c38b091b3c9}


Definition at line 1489 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-atomic\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-queuing\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1490 \{
1491     \textcolor{keyword}{register} \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t} *this\_thr;
1492     \textcolor{keyword}{volatile} kmp\_int32 *head\_id\_p = & lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7394dd8dc4fcc01f0ca8acda1a2ac82a}{head\_id};
1493     \textcolor{keyword}{volatile} kmp\_int32 *tail\_id\_p = & lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.tail\_id;
1494 
1495     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_release\_queuing\_lock: lck:%p, T#%d entering\(\backslash\)n"}, lck, gtid ));
1496     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1497     this\_thr    = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( gtid );
1498     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr != NULL );
1499 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1500 \textcolor{preprocessor}{}    TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"rel ent"} );
1501 
1502     \textcolor{keywordflow}{if} ( this\_thr->th.th\_spin\_here )
1503         \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, *head\_id\_p, *tail\_id\_p );
1504     \textcolor{keywordflow}{if} ( this\_thr->th.th\_next\_waiting != 0 )
1505         \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, *head\_id\_p, *tail\_id\_p );
1506 \textcolor{preprocessor}{#endif}
1507 \textcolor{preprocessor}{}    \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( !this\_thr->th.th\_spin\_here );
1508     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr->th.th\_next\_waiting == 0 );
1509 
1510     \hyperlink{kmp__itt_8h_a321c5d523f392e432350caffc38aecee}{KMP\_FSYNC\_RELEASING}(lck);
1511 
1512     \textcolor{keywordflow}{while}( 1 ) \{
1513         kmp\_int32 dequeued;
1514         kmp\_int32 \hyperlink{ittnotify__static_8h_ac73017ec329810f133ecdb16b66e5208}{head};
1515         kmp\_int32 \hyperlink{ittnotify__static_8h_a7205a2ef1da3b41743f40e66ffb8a1be}{tail};
1516 
1517         head = *head\_id\_p;
1518 
1519 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1520 \textcolor{preprocessor}{}        tail = *tail\_id\_p;
1521         TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"rel read: "}, head, tail );
1522         \textcolor{keywordflow}{if} ( head == 0 ) \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, head, tail );
1523 \textcolor{preprocessor}{#endif}
1524 \textcolor{preprocessor}{}        \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head != 0 ); \textcolor{comment}{/* holding the lock, head must be -1 or queue head 
      */}
1525 
1526         \textcolor{keywordflow}{if} ( head == -1 ) \{ \textcolor{comment}{/* nobody on queue */}
1527 
1528             \textcolor{comment}{/* try (-1,0)->(0,0) */}
1529             \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_a33fc76d0887ff2c7ad9ca1c206dd945b}{KMP\_COMPARE\_AND\_STORE\_REL32}( head\_id\_p, -1, 0 ) ) \{
1530                 \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_release\_queuing\_lock: lck:%p, T#%d exiting: queue empty\(\backslash\)n"},
1531                           lck, gtid ));
1532 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1533 \textcolor{preprocessor}{}                TRACE\_LOCK\_HT( gtid+1, \textcolor{stringliteral}{"rel exit: "}, 0, 0 );
1534 \textcolor{preprocessor}{#endif}
1535 \textcolor{preprocessor}{}
1536 \textcolor{preprocessor}{#if OMPT\_SUPPORT}
1537 \textcolor{preprocessor}{}                \textcolor{comment}{/* nothing to do - no other thread is trying to shift blame */}
1538 \textcolor{preprocessor}{#endif}
1539 \textcolor{preprocessor}{}
1540                 \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
1541             \}
1542             dequeued = \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1543 
1544         \}
1545         \textcolor{keywordflow}{else} \{
1546 
1547             tail = *tail\_id\_p;
1548             \textcolor{keywordflow}{if} ( head == tail ) \{  \textcolor{comment}{/* only one thread on the queue */}
1549 
1550 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1551 \textcolor{preprocessor}{}                \textcolor{keywordflow}{if} ( head <= 0 ) \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, head, tail );
1552 \textcolor{preprocessor}{#endif}
1553 \textcolor{preprocessor}{}                \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head > 0 );
1554 
1555                 \textcolor{comment}{/* try (h,h)->(-1,0) */}
1556                 dequeued = \hyperlink{kmp__os_8h_a25a9aff801444fe9e735e0a5cf7b0ad8}{KMP\_COMPARE\_AND\_STORE\_REL64}( (kmp\_int64 *) tail\_id\_p,
1557                   \hyperlink{kmp_8h_a133ff43911954aaf8d6b43003643e22a}{KMP\_PACK\_64}( head, head ), \hyperlink{kmp_8h_a133ff43911954aaf8d6b43003643e22a}{KMP\_PACK\_64}( -1, 0 ) );
1558 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1559 \textcolor{preprocessor}{}                TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"rel deq: (h,h)->(-1,0)"} );
1560 \textcolor{preprocessor}{#endif}
1561 \textcolor{preprocessor}{}
1562             \}
1563             \textcolor{keywordflow}{else} \{
1564                 \textcolor{keyword}{volatile} kmp\_int32 *waiting\_id\_p;
1565                 \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t}         *head\_thr = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( head
       - 1 );
1566                 \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head\_thr != NULL );
1567                 waiting\_id\_p = & head\_thr->th.th\_next\_waiting;
1568 
1569                 \textcolor{comment}{/* Does this require synchronous reads? */}
1570 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1571 \textcolor{preprocessor}{}                \textcolor{keywordflow}{if} ( head <= 0 || tail <= 0 ) \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, head, tail );
1572 \textcolor{preprocessor}{#endif}
1573 \textcolor{preprocessor}{}                \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head > 0 && tail > 0 );
1574 
1575                 \textcolor{comment}{/* try (h,t)->(h',t) or (t,t) */}
1576 
1577                 \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1578                 \textcolor{comment}{/* make sure enqueuing thread has time to update next waiting thread field */}
1579                 *head\_id\_p = \hyperlink{kmp__os_8h_a355e68ac2502d05ca4df8c3b20784dae}{KMP\_WAIT\_YIELD}((\textcolor{keyword}{volatile} kmp\_uint32*)waiting\_id\_p, 0, 
      \hyperlink{kmp__os_8h_a7714d8a014b47ac567f1899d0efc3ec9}{KMP\_NEQ}, NULL);
1580 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1581 \textcolor{preprocessor}{}                TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"rel deq: (h,t)->(h',t)"} );
1582 \textcolor{preprocessor}{#endif}
1583 \textcolor{preprocessor}{}                dequeued = \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1584             \}
1585         \}
1586 
1587         \textcolor{keywordflow}{if} ( dequeued ) \{
1588             \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t} *head\_thr = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( head - 1 );
1589             \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head\_thr != NULL );
1590 
1591             \textcolor{comment}{/* Does this require synchronous reads? */}
1592 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1593 \textcolor{preprocessor}{}            \textcolor{keywordflow}{if} ( head <= 0 || tail <= 0 ) \_\_kmp\_dump\_queuing\_lock( this\_thr, gtid, lck, head, tail );
1594 \textcolor{preprocessor}{#endif}
1595 \textcolor{preprocessor}{}            \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( head > 0 && tail > 0 );
1596 
1597             \textcolor{comment}{/* For clean code only.}
1598 \textcolor{comment}{             * Thread not released until next statement prevents race with acquire code.}
1599 \textcolor{comment}{             */}
1600             head\_thr->th.th\_next\_waiting = 0;
1601 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1602 \textcolor{preprocessor}{}            TRACE\_LOCK\_T( gtid+1, \textcolor{stringliteral}{"rel nw=0 for t="}, head );
1603 \textcolor{preprocessor}{#endif}
1604 \textcolor{preprocessor}{}
1605             \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1606             \textcolor{comment}{/* reset spin value */}
1607             head\_thr->th.th\_spin\_here = \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1608 
1609             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_release\_queuing\_lock: lck:%p, T#%d exiting: after dequeuing\(\backslash\)n"},
1610                       lck, gtid ));
1611 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1612 \textcolor{preprocessor}{}            TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"rel exit 2"} );
1613 \textcolor{preprocessor}{#endif}
1614 \textcolor{preprocessor}{}            \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
1615         \}
1616         \textcolor{comment}{/* KMP\_CPU\_PAUSE( );  don't want to make releasing thread hold up acquiring threads */}
1617 
1618 \textcolor{preprocessor}{#ifdef DEBUG\_QUEUING\_LOCKS}
1619 \textcolor{preprocessor}{}        TRACE\_LOCK( gtid+1, \textcolor{stringliteral}{"rel retry"} );
1620 \textcolor{preprocessor}{#endif}
1621 \textcolor{preprocessor}{}
1622     \} \textcolor{comment}{/* while */}
1623     \hyperlink{kmp__debug_8h_afa985a577299cb10dafe8d3bd462d635}{KMP\_ASSERT2}( 0, \textcolor{stringliteral}{"should not get here"} );
1624     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
1625 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a5c64e923324a01251bc1948d82b75a06}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a5c64e923324a01251bc1948d82b75a06}


Definition at line 1628 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1630 \{
1631     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_lock"};
1632     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
1633     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1634         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1635     \}
1636     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1637         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
1638     \}
1639     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) == -1 ) \{
1640         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
1641     \}
1642     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) != gtid ) \{
1643         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
1644     \}
1645     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = 0;
1646     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a4ba248b5ce7375a2426f3c38b091b3c9}{\_\_kmp\_release\_queuing\_lock}( lck, gtid );
1647 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a70ab5cc7e70192354a19bd8e988633de}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a70ab5cc7e70192354a19bd8e988633de}


Definition at line 176 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-create\-\_\-worker(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-tas\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
177 \{
178     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();       \textcolor{comment}{/* Flush all pending memory write invalidates.  */}
179 
180     \hyperlink{kmp__itt_8h_a321c5d523f392e432350caffc38aecee}{KMP\_FSYNC\_RELEASING}(lck);
181     \hyperlink{kmp__os_8h_a77838b82b92587a3c03fca5ff80c4f31}{KMP\_ST\_REL32}( &(lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll}), \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas) );
182     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();       \textcolor{comment}{/* Flush all pending memory write invalidates.  */}
183 
184     \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( \hyperlink{kmp_8h_a774ce85ac109df119feaca45ed4e69b1}{\_\_kmp\_nth} ) > ( \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? 
      \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} :
185       \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc} ) );
186     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
187 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af0bd0985606b39fc88daf9b62e068e30}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af0bd0985606b39fc88daf9b62e068e30}


Definition at line 190 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
191 \{
192     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_lock"};
193     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
194     \textcolor{keywordflow}{if} ( ( \textcolor{keyword}{sizeof} ( \hyperlink{unionkmp__tas__lock}{kmp\_tas\_lock\_t} ) <= \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} )
195       && \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
196         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
197     \}
198     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) == -1 ) \{
199         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
200     \}
201     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) >= 0 )
202       && ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) != gtid ) ) \{
203         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
204     \}
205     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a70ab5cc7e70192354a19bd8e988633de}{\_\_kmp\_release\_tas\_lock}( lck, gtid );
206 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af7bfd10b1c098b8892beae42bb8a5248}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_af7bfd10b1c098b8892beae42bb8a5248}


Definition at line 827 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-bootstrap\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-ticket\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
828 \{
829     kmp\_uint32  distance;
830 
831     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();       \textcolor{comment}{/* Flush all pending memory write invalidates.  */}
832 
833     \hyperlink{kmp__itt_8h_a321c5d523f392e432350caffc38aecee}{KMP\_FSYNC\_RELEASING}(lck);
834     distance = ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket} ) - \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->
      \hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} ) );
835 
836     \hyperlink{kmp__os_8h_a77838b82b92587a3c03fca5ff80c4f31}{KMP\_ST\_REL32}( &(lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving}), lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.
      \hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} + 1 );
837 
838     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();       \textcolor{comment}{/* Flush all pending memory write invalidates.  */}
839 
840     \hyperlink{kmp_8h_a9f0d88d1970adda4ad38d272e65d7844}{KMP\_YIELD}( distance
841       > (kmp\_uint32) (\hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} ? \hyperlink{kmp_8h_adc73a89e0c77c9b0a3233f9fde48a5b2}{\_\_kmp\_avail\_proc} : 
      \hyperlink{kmp_8h_a3469a7dffedccf219ec6b8a0e4ec8ed2}{\_\_kmp\_xproc}) );
842     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8h_a812b22744c448300aed0e24edead448e}{KMP\_LOCK\_RELEASED};
843 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ad7ac0bfe873e304f3a0a2113e39640b1}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-release\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ad7ac0bfe873e304f3a0a2113e39640b1}


Definition at line 846 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
847 \{
848     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_unset\_lock"};
849     \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();  \textcolor{comment}{/* in case another processor initialized lock */}
850     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
851         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
852     \}
853     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
854         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
855     \}
856     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) == -1 ) \{
857         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingFree, func );
858     \}
859     \textcolor{keywordflow}{if} ( ( gtid >= 0 ) && ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) >= 0 )
860       && ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) != gtid ) ) \{
861         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockUnsettingSetByAnother, func );
862     \}
863     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = 0;
864     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_af7bfd10b1c098b8892beae42bb8a5248}{\_\_kmp\_release\_ticket\_lock}( lck, gtid );
865 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a9befb445685d4f9598f62b3fb1112a45}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{{\bf kmp\-\_\-lock\-\_\-flags\-\_\-t}}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a9befb445685d4f9598f62b3fb1112a45}


Definition at line 3006 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
3007 \{
3008     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags} = \hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags};
3009 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a180c259e5f3273dae86d5e84e645567b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-drdpa\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{const {\bf ident\-\_\-t} $\ast$}]{loc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a180c259e5f3273dae86d5e84e645567b}


Definition at line 2994 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
2995 \{
2996     lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_aab9a244dfedf0a444df2955caff8ea7f}{location} = loc;
2997 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a1b12b25fb6f4a6adce6483ed17861e81}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{{\bf kmp\-\_\-lock\-\_\-flags\-\_\-t}}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a1b12b25fb6f4a6adce6483ed17861e81}


Definition at line 1873 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1874 \{
1875     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7a852c13f6838e44d2ef503d98420f2c}{flags} = \hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags};
1876 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a6f2c2af85ae2de82ebb6bbcecab71448}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-queuing\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{const {\bf ident\-\_\-t} $\ast$}]{loc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a6f2c2af85ae2de82ebb6bbcecab71448}


Definition at line 1861 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1862 \{
1863     lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a68cbb904df318e4e669d1ba3b1562c56}{location} = loc;
1864 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aa063a4bc0e977a61e35720f389057c54}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-flags (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{{\bf kmp\-\_\-lock\-\_\-flags\-\_\-t}}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_aa063a4bc0e977a61e35720f389057c54}


Definition at line 1085 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1086 \{
1087     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2de50496ac13d01017bc079a5bcf09ff}{flags} = \hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags};
1088 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae6d682199807a24e57b80031663fb501}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-ticket\-\_\-lock\-\_\-location (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{const {\bf ident\-\_\-t} $\ast$}]{loc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_ae6d682199807a24e57b80031663fb501}


Definition at line 1073 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().


\begin{DoxyCode}
1074 \{
1075     lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a0dba998d5ca5ad3494098a70ee5d067e}{location} = loc;
1076 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a419cdea86a64e2a7b1cb78f3f28404b8}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-lock\-\_\-kind\-\_\-t}}]{user\-\_\-lock\-\_\-kind}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a419cdea86a64e2a7b1cb78f3f28404b8}


Definition at line 3639 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-env\-\_\-initialize().


\begin{DoxyCode}
3640 \{
3641     \textcolor{keywordflow}{switch} ( user\_lock\_kind ) \{
3642         \textcolor{keywordflow}{case} \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51ea223583ac14cee27c01e4cee04139083e}{lk\_default}:
3643         \textcolor{keywordflow}{default}:
3644         \hyperlink{kmp__debug_8h_a5323a368e8ba273b17c46906dd9ec78c}{KMP\_ASSERT}( 0 );
3645 
3646         \textcolor{keywordflow}{case} \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51eae38ddd756bdb44cee826f0c40f1b32ba}{lk\_tas}: \{
3647             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( 
      \hyperlink{kmp__lock_8h_a08465aaad52d67f8ae556e7fccaa8c48}{kmp\_base\_tas\_lock\_t} );
3648             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( \hyperlink{kmp__lock_8h_ad7fed30e73035fc66ab6d2c83d310853}{kmp\_tas\_lock\_t} );
3649 
3650             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3651               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3652               ( &\hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner} );
3653 
3654             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3655                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(tas);
3656                 \hyperlink{kmp__lock_8h_a9c31ef20bf332a75916381add96bbf72}{KMP\_BIND\_NESTED\_USER\_LOCK\_WITH\_CHECKS}(tas);
3657             \}
3658             \textcolor{keywordflow}{else} \{
3659                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(tas);
3660                 \hyperlink{kmp__lock_8h_a0a9058d1235d4d91352fabff95cf9fcf}{KMP\_BIND\_NESTED\_USER\_LOCK}(tas);
3661             \}
3662 
3663             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3664               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3665               ( &\hyperlink{kmp__lock_8cpp_a5018ef7255f0e20469cf8cbe8c6da681}{\_\_kmp\_destroy\_tas\_lock} );
3666 
3667              \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3668                ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3669 
3670              \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3671                ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3672 
3673              \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3674                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) ) NULL;
3675 
3676              \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3677                ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3678 
3679              \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3680                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, 
      \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) ) NULL;
3681         \}
3682         \textcolor{keywordflow}{break};
3683 
3684 \textcolor{preprocessor}{#if KMP\_OS\_LINUX && (KMP\_ARCH\_X86 || KMP\_ARCH\_X86\_64 || KMP\_ARCH\_ARM)}
3685 \textcolor{preprocessor}{}
3686         \textcolor{keywordflow}{case} lk\_futex: \{
3687             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( kmp\_base\_futex\_lock\_t );
3688             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( kmp\_futex\_lock\_t );
3689 
3690             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3691               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3692               ( &\_\_kmp\_get\_futex\_lock\_owner );
3693 
3694             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3695                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(futex);
3696                 \hyperlink{kmp__lock_8h_a9c31ef20bf332a75916381add96bbf72}{KMP\_BIND\_NESTED\_USER\_LOCK\_WITH\_CHECKS}(futex);
3697             \}
3698             \textcolor{keywordflow}{else} \{
3699                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(futex);
3700                 \hyperlink{kmp__lock_8h_a0a9058d1235d4d91352fabff95cf9fcf}{KMP\_BIND\_NESTED\_USER\_LOCK}(futex);
3701             \}
3702 
3703             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3704               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3705               ( &\_\_kmp\_destroy\_futex\_lock );
3706 
3707              \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3708                ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3709 
3710              \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3711                ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3712 
3713              \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3714                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) ) NULL;
3715 
3716              \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3717                ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) ) NULL;
3718 
3719              \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3720                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, 
      \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) ) NULL;
3721         \}
3722         \textcolor{keywordflow}{break};
3723 
3724 \textcolor{preprocessor}{#endif // KMP\_OS\_LINUX && (KMP\_ARCH\_X86 || KMP\_ARCH\_X86\_64 || KMP\_ARCH\_ARM)}
3725 \textcolor{preprocessor}{}
3726         \textcolor{keywordflow}{case} \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51ea3fa6361015c80cec270a2145d6588439}{lk\_ticket}: \{
3727             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( 
      \hyperlink{kmp__lock_8h_af8dc62875c68083ff0b664d8f2b1075c}{kmp\_base\_ticket\_lock\_t} );
3728             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( \hyperlink{kmp__lock_8h_a4b61b6951ad864c4ce5019d331ad3c4c}{kmp\_ticket\_lock\_t} );
3729 
3730             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3731               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3732               ( &\hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner} );
3733 
3734             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3735                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(ticket);
3736                 \hyperlink{kmp__lock_8h_a9c31ef20bf332a75916381add96bbf72}{KMP\_BIND\_NESTED\_USER\_LOCK\_WITH\_CHECKS}(ticket);
3737             \}
3738             \textcolor{keywordflow}{else} \{
3739                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(ticket);
3740                 \hyperlink{kmp__lock_8h_a0a9058d1235d4d91352fabff95cf9fcf}{KMP\_BIND\_NESTED\_USER\_LOCK}(ticket);
3741             \}
3742 
3743             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3744               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3745               ( &\hyperlink{kmp__lock_8cpp_a18d218bd3b5826746086dd09a03d675e}{\_\_kmp\_destroy\_ticket\_lock} );
3746 
3747              \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3748                ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3749                ( &\hyperlink{kmp__lock_8cpp_a316f653461685c91019c91d17bb72079}{\_\_kmp\_is\_ticket\_lock\_initialized} );
3750 
3751              \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3752                ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3753                ( &\hyperlink{kmp__lock_8cpp_a796613f4e112e671712f9e2f1abd1099}{\_\_kmp\_get\_ticket\_lock\_location} );
3754 
3755              \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3756                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) )
3757                ( &\hyperlink{kmp__lock_8cpp_ae6d682199807a24e57b80031663fb501}{\_\_kmp\_set\_ticket\_lock\_location} );
3758 
3759              \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3760                ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3761                ( &\hyperlink{kmp__lock_8cpp_af46aee05fcd8cc61c645e688c07e5843}{\_\_kmp\_get\_ticket\_lock\_flags} );
3762 
3763              \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3764                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, 
      \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) )
3765                ( &\hyperlink{kmp__lock_8cpp_aa063a4bc0e977a61e35720f389057c54}{\_\_kmp\_set\_ticket\_lock\_flags} );
3766         \}
3767         \textcolor{keywordflow}{break};
3768 
3769         \textcolor{keywordflow}{case} \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51eabc3ccb35da27a852e0425bafb424a23a}{lk\_queuing}: \{
3770             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( 
      \hyperlink{kmp__lock_8h_ab8f5f3d036fb40f76bc95272e265e0f0}{kmp\_base\_queuing\_lock\_t} );
3771             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( 
      \hyperlink{kmp__lock_8h_afddb88c8dc45b091f6a602c7b4193a6c}{kmp\_queuing\_lock\_t} );
3772 
3773             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3774               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3775               ( &\hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner} );
3776 
3777             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3778                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(queuing);
3779                 \hyperlink{kmp__lock_8h_a9c31ef20bf332a75916381add96bbf72}{KMP\_BIND\_NESTED\_USER\_LOCK\_WITH\_CHECKS}(queuing);
3780             \}
3781             \textcolor{keywordflow}{else} \{
3782                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(queuing);
3783                 \hyperlink{kmp__lock_8h_a0a9058d1235d4d91352fabff95cf9fcf}{KMP\_BIND\_NESTED\_USER\_LOCK}(queuing);
3784             \}
3785 
3786             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3787               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3788               ( &\hyperlink{kmp__lock_8cpp_ac1eb96afb684c7906af8c61441e6fa70}{\_\_kmp\_destroy\_queuing\_lock} );
3789 
3790              \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3791                ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3792                ( &\hyperlink{kmp__lock_8cpp_a10f938d5fa98d18caa87a32917484c61}{\_\_kmp\_is\_queuing\_lock\_initialized} );
3793 
3794              \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3795                ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3796                ( &\hyperlink{kmp__lock_8cpp_a3bb2a5e779ce7f98cf0e2851bb78b025}{\_\_kmp\_get\_queuing\_lock\_location} );
3797 
3798              \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3799                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) )
3800                ( &\hyperlink{kmp__lock_8cpp_a6f2c2af85ae2de82ebb6bbcecab71448}{\_\_kmp\_set\_queuing\_lock\_location} );
3801 
3802              \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3803                ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3804                ( &\hyperlink{kmp__lock_8cpp_aedca2aad3b326e978793f8d008d8ce4e}{\_\_kmp\_get\_queuing\_lock\_flags} );
3805 
3806              \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3807                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, 
      \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) )
3808                ( &\hyperlink{kmp__lock_8cpp_a1b12b25fb6f4a6adce6483ed17861e81}{\_\_kmp\_set\_queuing\_lock\_flags} );
3809         \}
3810         \textcolor{keywordflow}{break};
3811 
3812 \textcolor{preprocessor}{#if KMP\_USE\_ADAPTIVE\_LOCKS}
3813 \textcolor{preprocessor}{}        \textcolor{keywordflow}{case} lk\_adaptive: \{
3814             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( kmp\_base\_adaptive\_lock\_t );
3815             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( kmp\_adaptive\_lock\_t );
3816 
3817             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3818               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3819               ( &\hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner} );
3820 
3821             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3822                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(adaptive);
3823             \}
3824             \textcolor{keywordflow}{else} \{
3825                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(adaptive);
3826             \}
3827 
3828             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3829               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3830               ( &\_\_kmp\_destroy\_adaptive\_lock );
3831 
3832             \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3833               ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3834               ( &\hyperlink{kmp__lock_8cpp_a10f938d5fa98d18caa87a32917484c61}{\_\_kmp\_is\_queuing\_lock\_initialized} );
3835 
3836             \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3837               ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3838               ( &\hyperlink{kmp__lock_8cpp_a3bb2a5e779ce7f98cf0e2851bb78b025}{\_\_kmp\_get\_queuing\_lock\_location} );
3839 
3840             \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3841               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) )
3842               ( &\hyperlink{kmp__lock_8cpp_a6f2c2af85ae2de82ebb6bbcecab71448}{\_\_kmp\_set\_queuing\_lock\_location} );
3843 
3844             \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3845               ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3846               ( &\hyperlink{kmp__lock_8cpp_aedca2aad3b326e978793f8d008d8ce4e}{\_\_kmp\_get\_queuing\_lock\_flags} );
3847 
3848             \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3849               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) )
3850               ( &\hyperlink{kmp__lock_8cpp_a1b12b25fb6f4a6adce6483ed17861e81}{\_\_kmp\_set\_queuing\_lock\_flags} );
3851 
3852         \}
3853         \textcolor{keywordflow}{break};
3854 \textcolor{preprocessor}{#endif // KMP\_USE\_ADAPTIVE\_LOCKS}
3855 \textcolor{preprocessor}{}
3856         \textcolor{keywordflow}{case} \hyperlink{kmp__lock_8h_a8311c5b02d0737c62b10926473f6c51ea8f51be73e12690a59d15807f820e2722}{lk\_drdpa}: \{
3857             \hyperlink{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\_\_kmp\_base\_user\_lock\_size} = \textcolor{keyword}{sizeof}( 
      \hyperlink{kmp__lock_8h_a9c05a2302a08b14f8d317b0ed63f3c48}{kmp\_base\_drdpa\_lock\_t} );
3858             \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} = \textcolor{keyword}{sizeof}( \hyperlink{kmp__lock_8h_aad008579fd6a362c2a1360d20945d5fe}{kmp\_drdpa\_lock\_t} );
3859 
3860             \hyperlink{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\_\_kmp\_get\_user\_lock\_owner\_} =
3861               ( kmp\_int32 ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3862               ( &\hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner} );
3863 
3864             \textcolor{keywordflow}{if} ( \hyperlink{kmp_8h_ab4062d4f566c901230e51490a8819ba0}{\_\_kmp\_env\_consistency\_check} ) \{
3865                 \hyperlink{kmp__lock_8h_aa60ff318f4eacc064e9c4f6dcc308691}{KMP\_BIND\_USER\_LOCK\_WITH\_CHECKS}(drdpa);
3866                 \hyperlink{kmp__lock_8h_a9c31ef20bf332a75916381add96bbf72}{KMP\_BIND\_NESTED\_USER\_LOCK\_WITH\_CHECKS}(drdpa);
3867             \}
3868             \textcolor{keywordflow}{else} \{
3869                 \hyperlink{kmp__lock_8h_ac7db5a88f6460b100c33aeb1501a10da}{KMP\_BIND\_USER\_LOCK}(drdpa);
3870                 \hyperlink{kmp__lock_8h_a0a9058d1235d4d91352fabff95cf9fcf}{KMP\_BIND\_NESTED\_USER\_LOCK}(drdpa);
3871             \}
3872 
3873             \hyperlink{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\_\_kmp\_destroy\_user\_lock\_} =
3874               ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3875               ( &\hyperlink{kmp__lock_8cpp_aae4a7e2fb4cf4c4acea3e5dd1f6e6715}{\_\_kmp\_destroy\_drdpa\_lock} );
3876 
3877              \hyperlink{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\_\_kmp\_is\_user\_lock\_initialized\_} =
3878                ( \hyperlink{ittnotify__static_8h_a8b8dcd723308a8cb5d84277c7a3fff70}{int} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3879                ( &\hyperlink{kmp__lock_8cpp_af8bbf205604614376e6ed6eceb3043b3}{\_\_kmp\_is\_drdpa\_lock\_initialized} );
3880 
3881              \hyperlink{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\_\_kmp\_get\_user\_lock\_location\_} =
3882                ( \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3883                ( &\hyperlink{kmp__lock_8cpp_a505ed8bf2d06a8cd74e3c0409ccf91cb}{\_\_kmp\_get\_drdpa\_lock\_location} );
3884 
3885              \hyperlink{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\_\_kmp\_set\_user\_lock\_location\_} =
3886                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, \textcolor{keyword}{const} \hyperlink{structident}{ident\_t} * ) )
3887                ( &\hyperlink{kmp__lock_8cpp_a180c259e5f3273dae86d5e84e645567b}{\_\_kmp\_set\_drdpa\_lock\_location} );
3888 
3889              \hyperlink{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\_\_kmp\_get\_user\_lock\_flags\_} =
3890                ( \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p} ) )
3891                ( &\hyperlink{kmp__lock_8cpp_a51b058c74beed1de5d14e8db705519cc}{\_\_kmp\_get\_drdpa\_lock\_flags} );
3892 
3893              \hyperlink{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\_\_kmp\_set\_user\_lock\_flags\_} =
3894                ( \hyperlink{ittnotify__static_8h_af941d56e55e3c5465135b60c4d6343ed}{void} ( * )( \hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}, 
      \hyperlink{kmp__lock_8h_aa9a2d4f195809e8574655b5eda034db7}{kmp\_lock\_flags\_t} ) )
3895                ( &\hyperlink{kmp__lock_8cpp_a9befb445685d4f9598f62b3fb1112a45}{\_\_kmp\_set\_drdpa\_lock\_flags} );
3896         \}
3897         \textcolor{keywordflow}{break};
3898     \}
3899 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a38a0a47b620d9562a2c87d5e45cb2c0b}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a38a0a47b620d9562a2c87d5e45cb2c0b}


Definition at line 2674 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock().


\begin{DoxyCode}
2675 \{
2676     \textcolor{comment}{//}
2677     \textcolor{comment}{// First get a ticket, then read the polls pointer and the mask.}
2678     \textcolor{comment}{// The polls pointer must be read before the mask!!! (See above)}
2679     \textcolor{comment}{//}
2680     kmp\_uint64 ticket = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket});     \textcolor{comment}{// volatile load}
2681     \textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *
      \hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls}
2682       = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll}{kmp\_base\_drdpa\_lock::kmp\_lock\_poll} *)
2683       \hyperlink{kmp__os_8h_a6e40f65c18c7b47fb612607b9bf8fdfc}{TCR\_PTR}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a593b095d74a879395f66298a78b97f44}{polls});                           \textcolor{comment}{// volatile load}
2684     kmp\_uint64 \hyperlink{ittnotify__static_8h_aa2c7de905e06240a7170f2a0da3a5abf}{mask} = \hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_acec09bcec7dbfc7df0ed9a06e61f3bcf}{mask});              \textcolor{comment}{// volatile load}
2685     \textcolor{keywordflow}{if} (\hyperlink{kmp__os_8h_ae7751c4fd274a522c6de1e02f8248aca}{TCR\_8}(polls[ticket & mask].\hyperlink{structkmp__base__drdpa__lock_1_1kmp__lock__poll_a8e501c759a67b04ad7e967131b035859}{poll}) == ticket) \{
2686         kmp\_uint64 \hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket} = ticket + 1;
2687         \textcolor{keywordflow}{if} (\hyperlink{kmp__os_8h_a530a2ef10afdb7b7f5dcf2ac226e80ba}{KMP\_COMPARE\_AND\_STORE\_ACQ64}((kmp\_int64 *)&lck->
      \hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket},
2688           ticket, next\_ticket)) \{
2689             \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
2690             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}(1000, (\textcolor{stringliteral}{"\_\_kmp\_test\_drdpa\_lock: ticket #%lld acquired lock %p\(\backslash\)n"},
2691                ticket, lck));
2692             lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a5b614d7eb0d32b3ce7e9412aa6ac24d6}{now\_serving} = ticket;               \textcolor{comment}{// non-volatile store}
2693 
2694             \textcolor{comment}{//}
2695             \textcolor{comment}{// Since no threads are waiting, there is no possibility that}
2696             \textcolor{comment}{// we would want to reconfigure the polling area.  We might}
2697             \textcolor{comment}{// have the cleanup ticket value (which says that it is now}
2698             \textcolor{comment}{// safe to deallocate old\_polls), but we'll let a later thread}
2699             \textcolor{comment}{// which calls \_\_kmp\_acquire\_lock do that - this routine}
2700             \textcolor{comment}{// isn't supposed to block, and we would risk blocks if we}
2701             \textcolor{comment}{// called \_\_kmp\_free() to do the deallocation.}
2702             \textcolor{comment}{//}
2703             \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2704         \}
2705     \}
2706     \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2707 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_abdc814adb697d75141602a9095725e0e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_abdc814adb697d75141602a9095725e0e}


Definition at line 2710 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2711 \{
2712     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_lock"};
2713     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2714         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2715     \}
2716     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2717         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
2718     \}
2719 
2720     \textcolor{keywordtype}{int} retval = \hyperlink{kmp__lock_8cpp_a38a0a47b620d9562a2c87d5e45cb2c0b}{\_\_kmp\_test\_drdpa\_lock}( lck, gtid );
2721 
2722     \textcolor{keywordflow}{if} ( retval ) \{
2723         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = gtid + 1;
2724     \}
2725     \textcolor{keywordflow}{return} retval;
2726 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_abee3ed3d1bc6ab32bf11a67b2354c854}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_abee3ed3d1bc6ab32bf11a67b2354c854}


Definition at line 2871 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
2872 \{
2873     \textcolor{keywordtype}{int} retval;
2874 
2875     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
2876 
2877     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a443602806cabcd8171e571685322a3e7}{\_\_kmp\_get\_drdpa\_lock\_owner}( lck ) == gtid ) \{
2878         retval = ++lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked};
2879     \}
2880     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !\hyperlink{kmp__lock_8cpp_a38a0a47b620d9562a2c87d5e45cb2c0b}{\_\_kmp\_test\_drdpa\_lock}( lck, gtid ) ) \{
2881         retval = 0;
2882     \}
2883     \textcolor{keywordflow}{else} \{
2884         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2885         retval = lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a8ab4634e1e61fe099058e01b2be89482}{depth\_locked} = 1;
2886         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
2887         lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a941e91e161836331e4107e447c360fea}{owner\_id} = gtid + 1;
2888     \}
2889     \textcolor{keywordflow}{return} retval;
2890 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a0744b69a77fd45024e583651d203ffb2}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-drdpa\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-drdpa\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a0744b69a77fd45024e583651d203ffb2}


Definition at line 2893 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
2894 \{
2895     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_nest\_lock"};
2896     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__drdpa__lock_a86f409a757a405036148f10c7e40d92e}{lk}.\hyperlink{structkmp__base__drdpa__lock_a92a265553be821abfabdb1c68f70b70b}{initialized} != lck ) \{
2897         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
2898     \}
2899     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_ae28f5b8cd01f291a21dcb9fbbc29fb4a}{\_\_kmp\_is\_drdpa\_lock\_nestable}( lck ) ) \{
2900         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
2901     \}
2902     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_abee3ed3d1bc6ab32bf11a67b2354c854}{\_\_kmp\_test\_nested\_drdpa\_lock}( lck, gtid );
2903 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a7d6b6771619f2c7adbb0a5860d9f41c0}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a7d6b6771619f2c7adbb0a5860d9f41c0}


Definition at line 1737 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1738 \{
1739     \textcolor{keywordtype}{int} retval;
1740 
1741     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1742 
1743     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a64ed46209d7c7df9aa07d18408473c9a}{\_\_kmp\_get\_queuing\_lock\_owner}( lck ) == gtid ) \{
1744         retval = ++lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked};
1745     \}
1746     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !\hyperlink{kmp__lock_8cpp_a88591c51c56cf31b41017384f3c20aeb}{\_\_kmp\_test\_queuing\_lock}( lck, gtid ) ) \{
1747         retval = 0;
1748     \}
1749     \textcolor{keywordflow}{else} \{
1750         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1751         retval = lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_aeb4369f909fac2f5a9b2c728153b1f27}{depth\_locked} = 1;
1752         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
1753         lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = gtid + 1;
1754     \}
1755     \textcolor{keywordflow}{return} retval;
1756 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a4b624f1a689eac9269b35f04ed359d46}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a4b624f1a689eac9269b35f04ed359d46}


Definition at line 1759 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1761 \{
1762     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_nest\_lock"};
1763     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1764         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1765     \}
1766     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1767         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
1768     \}
1769     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a7d6b6771619f2c7adbb0a5860d9f41c0}{\_\_kmp\_test\_nested\_queuing\_lock}( lck, gtid );
1770 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_ae0bc12c4c9863b59e92e1be429769af0}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_ae0bc12c4c9863b59e92e1be429769af0}


Definition at line 272 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
273 \{
274     \textcolor{keywordtype}{int} retval;
275 
276     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
277 
278     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_af6d57fe5f28bf048e8763eb930a45997}{\_\_kmp\_get\_tas\_lock\_owner}( lck ) == gtid ) \{
279         retval = ++lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked};
280     \}
281     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !\hyperlink{kmp__lock_8cpp_af6eab9fe4c97bddc877fb562765bc3ff}{\_\_kmp\_test\_tas\_lock}( lck, gtid ) ) \{
282         retval = 0;
283     \}
284     \textcolor{keywordflow}{else} \{
285         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
286         retval = lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a78d8935d7c7391732f7e6ff82ee8da15}{depth\_locked} = 1;
287     \}
288     \textcolor{keywordflow}{return} retval;
289 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_abae3037662366a74c1e4f0583ccf5d09}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_abae3037662366a74c1e4f0583ccf5d09}


Definition at line 292 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
293 \{
294     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_nest\_lock"};
295     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
296         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
297     \}
298     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_ae0bc12c4c9863b59e92e1be429769af0}{\_\_kmp\_test\_nested\_tas\_lock}( lck, gtid );
299 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a603e841ba0679823463f7e1b5f90109e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a603e841ba0679823463f7e1b5f90109e}


Definition at line 949 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
950 \{
951     \textcolor{keywordtype}{int} retval;
952 
953     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
954 
955     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a45796b810df496973a24593c2c77ebd8}{\_\_kmp\_get\_ticket\_lock\_owner}( lck ) == gtid ) \{
956         retval = ++lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked};
957     \}
958     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !\hyperlink{kmp__lock_8cpp_aa00f8e9cca0115bb7d3f95521b30e857}{\_\_kmp\_test\_ticket\_lock}( lck, gtid ) ) \{
959         retval = 0;
960     \}
961     \textcolor{keywordflow}{else} \{
962         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
963         retval = lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a647923086ea397dda0c5d9351cb16835}{depth\_locked} = 1;
964         \hyperlink{kmp__os_8h_ab19ae0836bf2f1ac24e5cfc97c6d7d41}{KMP\_MB}();
965         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = gtid + 1;
966     \}
967     \textcolor{keywordflow}{return} retval;
968 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a81339459a840eae32705a930d22c4f4a}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a81339459a840eae32705a930d22c4f4a}


Definition at line 971 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
973 \{
974     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_nest\_lock"};
975     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
976         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
977     \}
978     \textcolor{keywordflow}{if} ( ! \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
979         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockSimpleUsedAsNestable, func );
980     \}
981     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_a603e841ba0679823463f7e1b5f90109e}{\_\_kmp\_test\_nested\_ticket\_lock}( lck, gtid );
982 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a88591c51c56cf31b41017384f3c20aeb}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a88591c51c56cf31b41017384f3c20aeb}


Definition at line 1436 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-atomic\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-queuing\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
1437 \{
1438     \textcolor{keyword}{volatile} kmp\_int32 *head\_id\_p  = & lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a7394dd8dc4fcc01f0ca8acda1a2ac82a}{head\_id};
1439     kmp\_int32 \hyperlink{ittnotify__static_8h_ac73017ec329810f133ecdb16b66e5208}{head};
1440 \textcolor{preprocessor}{#ifdef KMP\_DEBUG}
1441 \textcolor{preprocessor}{}    \hyperlink{kmp_8h_a194859801fe16b326efe34501a37c30a}{kmp\_info\_t} *this\_thr;
1442 \textcolor{preprocessor}{#endif}
1443 \textcolor{preprocessor}{}
1444     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_test\_queuing\_lock: T#%d entering\(\backslash\)n"}, gtid ));
1445     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( gtid >= 0 );
1446 \textcolor{preprocessor}{#ifdef KMP\_DEBUG}
1447 \textcolor{preprocessor}{}    this\_thr = \hyperlink{kmp_8h_a1626e286e4eb82742a397442009721e6}{\_\_kmp\_thread\_from\_gtid}( gtid );
1448     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( this\_thr != NULL );
1449     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( !this\_thr->th.th\_spin\_here );
1450 \textcolor{preprocessor}{#endif}
1451 \textcolor{preprocessor}{}
1452     head = *head\_id\_p;
1453 
1454     \textcolor{keywordflow}{if} ( head == 0 ) \{ \textcolor{comment}{/* nobody on queue, nobody holding */}
1455 
1456         \textcolor{comment}{/* try (0,0)->(-1,0) */}
1457 
1458         \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( head\_id\_p, 0, -1 ) ) \{
1459             \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_test\_queuing\_lock: T#%d exiting: holding lock\(\backslash\)n"}, gtid ));
1460             \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}(lck);
1461             \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1462         \}
1463     \}
1464 
1465     \hyperlink{kmp__debug_8h_a21d51f37cb197aca5ffe737531678830}{KA\_TRACE}( 1000, (\textcolor{stringliteral}{"\_\_kmp\_test\_queuing\_lock: T#%d exiting: without lock\(\backslash\)n"}, gtid ));
1466     \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1467 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af8be51ca9a6c379b78d1076f67219f51}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-queuing\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-queuing\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_af8be51ca9a6c379b78d1076f67219f51}


Definition at line 1470 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
1471 \{
1472     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_lock"};
1473     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_ad48bdf610c8430b474d0ae77b818c8f2}{initialized} != lck ) \{
1474         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
1475     \}
1476     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a5559ff56b6cb54bc903056235622b0e0}{\_\_kmp\_is\_queuing\_lock\_nestable}( lck ) ) \{
1477         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
1478     \}
1479 
1480     \textcolor{keywordtype}{int} retval = \hyperlink{kmp__lock_8cpp_a88591c51c56cf31b41017384f3c20aeb}{\_\_kmp\_test\_queuing\_lock}( lck, gtid );
1481 
1482     \textcolor{keywordflow}{if} ( retval ) \{
1483         lck->\hyperlink{unionkmp__queuing__lock_a3c11a864f3b00af968449bd561d0da1b}{lk}.\hyperlink{structkmp__base__queuing__lock_a26c7922624855130950f47f0d41c5b78}{owner\_id} = gtid + 1;
1484     \}
1485     \textcolor{keywordflow}{return} retval;
1486 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_af6eab9fe4c97bddc877fb562765bc3ff}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_af6eab9fe4c97bddc877fb562765bc3ff}


Definition at line 154 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-tas\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
155 \{
156     \textcolor{keywordflow}{if} ( ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.\hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} == \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas) )
157       && \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( & ( lck->\hyperlink{unionkmp__tas__lock_ad51358485337a210e18f4ea9cbe6477a}{lk}.
      \hyperlink{structkmp__base__tas__lock_a32c35f002d15ce50345770498ab6b0c0}{poll} ), \hyperlink{kmp__lock_8h_a8a18e02137fd70da01b0e8fc624e81ae}{KMP\_LOCK\_FREE}(tas), \hyperlink{kmp__lock_8h_aecbb6c8547c1ac532886145c1308afd6}{KMP\_LOCK\_BUSY}(gtid+1, tas) ) ) \{
158         \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}( lck );
159         \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
160     \}
161     \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
162 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a8d0c321cd228438dd28a75e2182b37ac}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-tas\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-tas\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_a8d0c321cd228438dd28a75e2182b37ac}


Definition at line 165 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
166 \{
167     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_lock"};
168     \textcolor{keywordflow}{if} ( ( \textcolor{keyword}{sizeof} ( \hyperlink{unionkmp__tas__lock}{kmp\_tas\_lock\_t} ) <= \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} )
169       && \hyperlink{kmp__lock_8cpp_a0e072bca923d1b0aaffb8b4b2d7e6c51}{\_\_kmp\_is\_tas\_lock\_nestable}( lck ) ) \{
170         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
171     \}
172     \textcolor{keywordflow}{return} \hyperlink{kmp__lock_8cpp_af6eab9fe4c97bddc877fb562765bc3ff}{\_\_kmp\_test\_tas\_lock}( lck, gtid );
173 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_aa00f8e9cca0115bb7d3f95521b30e857}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_aa00f8e9cca0115bb7d3f95521b30e857}


Definition at line 793 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-bootstrap\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-lock(), \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-ticket\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks().


\begin{DoxyCode}
794 \{
795     kmp\_uint32 my\_ticket = \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket} );
796     \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_acd6256e4afba32d90997235fc0a38a74}{TCR\_4}( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_af2e1b640be5026e8bbe7b1ed7d1b341e}{now\_serving} ) == my\_ticket ) \{
797         kmp\_uint32 \hyperlink{structkmp__base__drdpa__lock_ad785a638373622c2eb3fb47dc9da66ce}{next\_ticket} = my\_ticket + 1;
798         \textcolor{keywordflow}{if} ( \hyperlink{kmp__os_8h_ae2107985ffcede8039b92405b7153954}{KMP\_COMPARE\_AND\_STORE\_ACQ32}( (kmp\_int32 *) &lck->
      \hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a5d8979535f7e42b2ab96100564315a98}{next\_ticket},
799           my\_ticket, next\_ticket ) ) \{
800             \hyperlink{kmp__itt_8h_a55e03b5573ba300862a83d3a6184d670}{KMP\_FSYNC\_ACQUIRED}( lck );
801             \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
802         \}
803     \}
804     \textcolor{keywordflow}{return} \hyperlink{kmp_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
805 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_abcb58daf6d01f54b62e77ad838342013}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf int} \-\_\-\-\_\-kmp\-\_\-test\-\_\-ticket\-\_\-lock\-\_\-with\-\_\-checks (
\begin{DoxyParamCaption}
\item[{{\bf kmp\-\_\-ticket\-\_\-lock\-\_\-t} $\ast$}]{lck, }
\item[{kmp\-\_\-int32}]{gtid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{kmp__lock_8cpp_abcb58daf6d01f54b62e77ad838342013}


Definition at line 808 of file kmp\-\_\-lock.\-cpp.


\begin{DoxyCode}
809 \{
810     \textcolor{keywordtype}{char} \textcolor{keyword}{const} * \textcolor{keyword}{const} func = \textcolor{stringliteral}{"omp\_test\_lock"};
811     \textcolor{keywordflow}{if} ( lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a2dc1ea0be551259b6aa4854628562e0d}{initialized} != lck ) \{
812         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockIsUninitialized, func );
813     \}
814     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a9a04d4a907f5795de766ad435a2af5c3}{\_\_kmp\_is\_ticket\_lock\_nestable}( lck ) ) \{
815         \hyperlink{kmp__i18n_8h_aaa06fec585285ef7883baea41bfd948f}{KMP\_FATAL}( LockNestableUsedAsSimple, func );
816     \}
817 
818     \textcolor{keywordtype}{int} retval = \hyperlink{kmp__lock_8cpp_aa00f8e9cca0115bb7d3f95521b30e857}{\_\_kmp\_test\_ticket\_lock}( lck, gtid );
819 
820     \textcolor{keywordflow}{if} ( retval ) \{
821         lck->\hyperlink{unionkmp__ticket__lock_afc1a5e006715d07f36f2ddae6dc0b04b}{lk}.\hyperlink{structkmp__base__ticket__lock_a24b62af42d72540c62cfbca970895539}{owner\_id} = gtid + 1;
822     \}
823     \textcolor{keywordflow}{return} retval;
824 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a10c0876b4da16c6b3a6ff43e08dce1bc}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate}}
\index{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-user\-\_\-lock\-\_\-p} \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$$\ast$}]{user\-\_\-lock, }
\item[{kmp\-\_\-int32}]{gtid, }
\item[{{\bf kmp\-\_\-lock\-\_\-flags\-\_\-t}}]{flags}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a10c0876b4da16c6b3a6ff43e08dce1bc}


Definition at line 3976 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-get\-\_\-critical\-\_\-section\-\_\-ptr(), \-\_\-\-\_\-kmpc\-\_\-init\-\_\-lock(), and \-\_\-\-\_\-kmpc\-\_\-init\-\_\-nest\-\_\-lock().


\begin{DoxyCode}
3978 \{
3979     \hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} lck;
3980     \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} index;
3981     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( user\_lock );
3982 
3983     \hyperlink{kmp__lock_8h_a0eb3c836f2c88a4b8cad9535b53bafe0}{\_\_kmp\_acquire\_lock}( &\hyperlink{kmp_8h_a56af8af84b1717817c3abe69ecc8cc18}{\_\_kmp\_global\_lock}, gtid );
3984 
3985     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool} == NULL ) \{
3986         \textcolor{comment}{// Lock pool is empty. Allocate new memory.}
3987         \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}{\_\_kmp\_num\_locks\_in\_block} <= 1 ) \{ \textcolor{comment}{// Tune this cutoff point.}
3988             lck = (\hyperlink{kmp__lock_8h_a35c88b3ea74b2a8d633ec8156c1c4670}{kmp\_user\_lock\_p}) \hyperlink{kmp_8h_aa6a69b47037dcffbfc5dba21a4a64d85}{\_\_kmp\_allocate}( 
      \hyperlink{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\_\_kmp\_user\_lock\_size} );
3989         \}
3990         \textcolor{keywordflow}{else} \{
3991             lck = \hyperlink{kmp__lock_8cpp_a9b19a714b89b607acf8c5fde8b4bedcd}{\_\_kmp\_lock\_block\_allocate}();
3992         \}
3993 
3994         \textcolor{comment}{// Insert lock in the table so that it can be freed in \_\_kmp\_cleanup,}
3995         \textcolor{comment}{// and debugger has info on all allocated locks.}
3996         index = \hyperlink{kmp__lock_8cpp_ae5504ced69ec77de5e5dbb42b1d3bf76}{\_\_kmp\_lock\_table\_insert}( lck );
3997     \}
3998     \textcolor{keywordflow}{else} \{
3999         \textcolor{comment}{// Pick up lock from pool.}
4000         lck = \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool};
4001         index = \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool}->\hyperlink{unionkmp__user__lock_adda8ec585d9625951bb781831fb3f3b3}{pool}.\hyperlink{structkmp__lock__pool_a2a8f902fec6d5df831656b286838fb24}{index};
4002         \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool} = \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool}->\hyperlink{unionkmp__user__lock_adda8ec585d9625951bb781831fb3f3b3}{pool}.
      \hyperlink{structkmp__lock__pool_af643d9132f2383574cec0a390a215014}{next};
4003     \}
4004 
4005     \textcolor{comment}{//}
4006     \textcolor{comment}{// We could potentially differentiate between nested and regular locks}
4007     \textcolor{comment}{// here, and do the lock table lookup for regular locks only.}
4008     \textcolor{comment}{//}
4009     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} < \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) ) \{
4010         * ( (\hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} *) user\_lock ) = index;
4011     \}
4012     \textcolor{keywordflow}{else} \{
4013         * ( (\hyperlink{unionkmp__user__lock}{kmp\_user\_lock\_p} *) user\_lock ) = lck;
4014     \}
4015 
4016     \textcolor{comment}{// mark the lock if it is critical section lock.}
4017     \hyperlink{kmp__lock_8h_ada8cbf118ebffcfbe752a8f52e652cbb}{\_\_kmp\_set\_user\_lock\_flags}( lck, \hyperlink{structkmp__base__drdpa__lock_a9307a08687874c5ba8ad3ac355945ac7}{flags} );
4018 
4019     \hyperlink{kmp__lock_8h_ab32472fcbb6de6d99adb9fbbdaf5a39a}{\_\_kmp\_release\_lock}( & \hyperlink{kmp_8h_a56af8af84b1717817c3abe69ecc8cc18}{\_\_kmp\_global\_lock}, gtid ); \textcolor{comment}{// AC: TODO: move
       this line upper}
4020 
4021     \textcolor{keywordflow}{return} lck;
4022 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_a89dbafea8bd238f6be92af997e823f60}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free}}
\index{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$$\ast$}]{user\-\_\-lock, }
\item[{kmp\-\_\-int32}]{gtid, }
\item[{{\bf kmp\-\_\-user\-\_\-lock\-\_\-p}}]{lck}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_a89dbafea8bd238f6be92af997e823f60}


Definition at line 4026 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-get\-\_\-critical\-\_\-section\-\_\-ptr(), \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-lock(), and \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-nest\-\_\-lock().


\begin{DoxyCode}
4027 \{
4028     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( user\_lock != NULL );
4029     \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( lck != NULL );
4030 
4031     \hyperlink{kmp__lock_8h_a0eb3c836f2c88a4b8cad9535b53bafe0}{\_\_kmp\_acquire\_lock}( & \hyperlink{kmp_8h_a56af8af84b1717817c3abe69ecc8cc18}{\_\_kmp\_global\_lock}, gtid );
4032 
4033     lck->\hyperlink{unionkmp__user__lock_adda8ec585d9625951bb781831fb3f3b3}{pool}.\hyperlink{structkmp__lock__pool_af643d9132f2383574cec0a390a215014}{next} = \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool};
4034     \hyperlink{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\_\_kmp\_lock\_pool} = lck;
4035     \textcolor{keywordflow}{if} ( \hyperlink{kmp__lock_8h_a9da0f9668c9ff09182c7bb87408231cb}{OMP\_LOCK\_T\_SIZE} < \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) ) \{
4036         \hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} index = * ( (\hyperlink{kmp__lock_8h_ab39663a4351cc2f0ef04180107a5db84}{kmp\_lock\_index\_t} *) user\_lock );
4037         \hyperlink{kmp__debug_8h_ad766efc30e33e28634691088e80cdf08}{KMP\_DEBUG\_ASSERT}( 0 < index && index <= 
      \hyperlink{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\_\_kmp\_user\_lock\_table}.\hyperlink{structkmp__lock__table_a92f49bd4acf0bbe4548629b8010bcc3b}{used} );
4038         lck->\hyperlink{unionkmp__user__lock_adda8ec585d9625951bb781831fb3f3b3}{pool}.\hyperlink{structkmp__lock__pool_a2a8f902fec6d5df831656b286838fb24}{index} = index;
4039     \}
4040 
4041     \hyperlink{kmp__lock_8h_ab32472fcbb6de6d99adb9fbbdaf5a39a}{\_\_kmp\_release\_lock}( & \hyperlink{kmp_8h_a56af8af84b1717817c3abe69ecc8cc18}{\_\_kmp\_global\_lock}, gtid );
4042 \}
\end{DoxyCode}
\hypertarget{kmp__lock_8cpp_acc540f5f662d26296dd6b57ad5fbe198}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks@{\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks}}
\index{\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks@{\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \-\_\-\-\_\-kmp\-\_\-validate\-\_\-locks (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}}\label{kmp__lock_8cpp_acc540f5f662d26296dd6b57ad5fbe198}


Definition at line 44 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-do\-\_\-serial\-\_\-initialize().


\begin{DoxyCode}
45 \{
46     \textcolor{keywordtype}{int} \hyperlink{kmp__stub_8c_a08582ce460e3d5e1cf0b7fea017d608e}{i};
47     kmp\_uint32  \hyperlink{ittnotify__static_8h_a25eb27b280775b27a5ddc4d1673225aa}{x}, y;
48 
49     \textcolor{comment}{/* Check to make sure unsigned arithmetic does wraps properly */}
50     x = ~((kmp\_uint32) 0) - 2;
51     y = x - 2;
52 
53     \textcolor{keywordflow}{for} (i = 0; i < 8; ++\hyperlink{kmp__stub_8c_a08582ce460e3d5e1cf0b7fea017d608e}{i}, ++\hyperlink{ittnotify__static_8h_a25eb27b280775b27a5ddc4d1673225aa}{x}, ++y) \{
54         kmp\_uint32 z = (x - y);
55         \hyperlink{kmp__debug_8h_a5323a368e8ba273b17c46906dd9ec78c}{KMP\_ASSERT}( z == 2 );
56     \}
57 
58     \hyperlink{kmp__debug_8h_a5323a368e8ba273b17c46906dd9ec78c}{KMP\_ASSERT}( offsetof( \hyperlink{structkmp__base__queuing__lock}{kmp\_base\_queuing\_lock}, tail\_id ) % 8 == 0 );
59 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{kmp__lock_8cpp_a94b8d6eeaf00ec7805b98b66d8d9a709}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a94b8d6eeaf00ec7805b98b66d8d9a709}


Definition at line 3626 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a51acf10d279b7ac94d75afb47c99229e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a51acf10d279b7ac94d75afb47c99229e}


Definition at line 3619 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-acquire\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size@{\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size}}
\index{\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size@{\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t \-\_\-\-\_\-kmp\-\_\-base\-\_\-user\-\_\-lock\-\_\-size = 0}}\label{kmp__lock_8cpp_a05a5cc3f683df5a1edfe173e6fc3e0fd}


Definition at line 3615 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-end\-\_\-critical\-\_\-section\-\_\-reduce\-\_\-block(), and \-\_\-\-\_\-kmp\-\_\-enter\-\_\-critical\-\_\-section\-\_\-reduce\-\_\-block().

\hypertarget{kmp__lock_8cpp_acc5e8a9dccb0b2decd7c37ed96601095}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_acc5e8a9dccb0b2decd7c37ed96601095}


Definition at line 3631 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a7d22e663beec30a4c082ec350231bd2c}


Definition at line 3624 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_aa375d03bf5698dc712e5c819410ce9b2}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_aa375d03bf5698dc712e5c819410ce9b2}


Definition at line 3625 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-destroy\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-lock\-\_\-flags\-\_\-t}( $\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-flags\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a1338befad4e7f4af449272034580d409}


Definition at line 3636 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf ident\-\_\-t}$\ast$( $\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a029856edb72e3e43044700d48461b60f}


Definition at line 3634 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-location(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-@{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}kmp\-\_\-int32( $\ast$ \-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a6dddd0312ea9d7c41607511a30517d4f}


Definition at line 3618 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-get\-\_\-user\-\_\-lock\-\_\-owner(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_ac41c13bcd02c27b75ca6e8701a16d21c}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_ac41c13bcd02c27b75ca6e8701a16d21c}


Definition at line 3630 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a74b758302b7be1af24367f6b12574823}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a74b758302b7be1af24367f6b12574823}


Definition at line 3623 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-init\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-@{\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-is\-\_\-user\-\_\-lock\-\_\-initialized\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a9ea2cea170556f288f419a832fa1bb89}


Definition at line 3633 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks}}
\index{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-block\-\_\-of\-\_\-locks}$\ast$ \-\_\-\-\_\-kmp\-\_\-lock\-\_\-blocks = N\-U\-L\-L}}\label{kmp__lock_8cpp_a4700fce2ae21cd87f85fd99bb7edc37f}


Definition at line 3909 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-atfork\-\_\-child(), \-\_\-\-\_\-kmp\-\_\-cleanup\-\_\-user\-\_\-locks(), and \-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate().

\hypertarget{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool}}
\index{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool@{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-user\-\_\-lock\-\_\-p} \-\_\-\-\_\-kmp\-\_\-lock\-\_\-pool = N\-U\-L\-L}}\label{kmp__lock_8cpp_aa40688bd81183f89f0a390a69d56f68d}


Definition at line 3906 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-allocate(), and \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-free().

\hypertarget{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block@{\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block}}
\index{\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block@{\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} \-\_\-\-\_\-kmp\-\_\-num\-\_\-locks\-\_\-in\-\_\-block = 1}}\label{kmp__lock_8cpp_a839731503d05b30f4d387426d46e4591}


Definition at line 3910 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-lock\-\_\-block\-\_\-allocate(), \-\_\-\-\_\-kmp\-\_\-stg\-\_\-parse\-\_\-lock\-\_\-block(), and \-\_\-\-\_\-kmp\-\_\-stg\-\_\-print\-\_\-lock\-\_\-block().

\hypertarget{kmp__lock_8cpp_a9467b02a2b8ac0faef4fa9d043774d74}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a9467b02a2b8ac0faef4fa9d043774d74}


Definition at line 3629 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a822335df558800c634178e5507a53c34}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a822335df558800c634178e5507a53c34}


Definition at line 3622 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-release\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, {\bf kmp\-\_\-lock\-\_\-flags\-\_\-t} flags) = N\-U\-L\-L}}\label{kmp__lock_8cpp_afa249135f174094e10c6d68d06e8e5d7}


Definition at line 3637 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-flags(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-@{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}( $\ast$ \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, const {\bf ident\-\_\-t} $\ast$loc) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a91bc917370ea8b7954104f53b0ec1d94}


Definition at line 3635 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-location(), and \-\_\-\-\_\-kmp\-\_\-set\-\_\-user\-\_\-lock\-\_\-vptrs().

\hypertarget{kmp__lock_8cpp_ae060af051b73d491221e82395b563fcd}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_ae060af051b73d491221e82395b563fcd}


Definition at line 3628 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-nested\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a61452fcaf5e2c5dfe1260d2b6df8b469}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}}
\index{\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-@{\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int}( $\ast$ \-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks\-\_\-)({\bf kmp\-\_\-user\-\_\-lock\-\_\-p} lck, kmp\-\_\-int32 gtid) = N\-U\-L\-L}}\label{kmp__lock_8cpp_a61452fcaf5e2c5dfe1260d2b6df8b469}


Definition at line 3621 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-test\-\_\-user\-\_\-lock\-\_\-with\-\_\-checks().

\hypertarget{kmp__lock_8cpp_a0e6c33ed4cfc6430f93288ca2c2bfebe}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind}}
\index{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf kmp\-\_\-lock\-\_\-kind} \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-kind = {\bf lk\-\_\-default}}}\label{kmp__lock_8cpp_a0e6c33ed4cfc6430f93288ca2c2bfebe}


Definition at line 3613 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-env\-\_\-initialize(), \-\_\-\-\_\-kmp\-\_\-stg\-\_\-parse\-\_\-lock\-\_\-kind(), \-\_\-\-\_\-kmp\-\_\-stg\-\_\-print\-\_\-lock\-\_\-kind(), \-\_\-\-\_\-kmpc\-\_\-critical(), \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-destroy\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-end\-\_\-critical(), \-\_\-\-\_\-kmpc\-\_\-init\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-init\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-set\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-set\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-test\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-test\-\_\-nest\-\_\-lock(), \-\_\-\-\_\-kmpc\-\_\-unset\-\_\-lock(), and \-\_\-\-\_\-kmpc\-\_\-unset\-\_\-nest\-\_\-lock().

\hypertarget{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size}}
\index{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-size = 0}}\label{kmp__lock_8cpp_a116b7836afef193d541283519a0ba6ac}


Definition at line 3616 of file kmp\-\_\-lock.\-cpp.

\hypertarget{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}{\index{kmp\-\_\-lock.\-cpp@{kmp\-\_\-lock.\-cpp}!\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table}}
\index{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table@{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table}!kmp_lock.cpp@{kmp\-\_\-lock.\-cpp}}
\subsubsection[{\-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kmp\-\_\-lock\-\_\-table\-\_\-t} \-\_\-\-\_\-kmp\-\_\-user\-\_\-lock\-\_\-table = \{ 1, 0, N\-U\-L\-L \}}}\label{kmp__lock_8cpp_a71ca798d77f420b73d7f788913a44a4e}


Definition at line 3905 of file kmp\-\_\-lock.\-cpp.



Referenced by \-\_\-\-\_\-kmp\-\_\-atfork\-\_\-child().

