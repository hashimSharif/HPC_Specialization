<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LLVM OpenMP* Runtime Library: Statistics Gathering from OMPTB</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LLVM OpenMP* Runtime Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Statistics Gathering from OMPTB</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga49fb18e6ba9abac7dcf1f9a202741b66"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga49fb18e6ba9abac7dcf1f9a202741b66">KMP_FOREACH_COUNTER</a>(macro, arg)</td></tr>
<tr class="memdesc:ga49fb18e6ba9abac7dcf1f9a202741b66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new counters under <a class="el" href="group__STATS__GATHERING.html#ga49fb18e6ba9abac7dcf1f9a202741b66" title="Add new counters under KMP_FOREACH_COUNTER() macro in kmp_stats.h. ">KMP_FOREACH_COUNTER()</a> macro in <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.  <a href="#ga49fb18e6ba9abac7dcf1f9a202741b66">More...</a><br/></td></tr>
<tr class="separator:ga49fb18e6ba9abac7dcf1f9a202741b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0bd69c3ce378f4f7079276311e034c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#gab0bd69c3ce378f4f7079276311e034c0">KMP_FOREACH_EXPLICIT_TIMER</a>(macro, arg)</td></tr>
<tr class="memdesc:gab0bd69c3ce378f4f7079276311e034c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new explicit timers under <a class="el" href="group__STATS__GATHERING.html#gab0bd69c3ce378f4f7079276311e034c0" title="Add new explicit timers under KMP_FOREACH_EXPLICIT_TIMER() macro. ">KMP_FOREACH_EXPLICIT_TIMER()</a> macro.  <a href="#gab0bd69c3ce378f4f7079276311e034c0">More...</a><br/></td></tr>
<tr class="separator:gab0bd69c3ce378f4f7079276311e034c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62f4b6e3a4ba48c04b172b97df137839"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga62f4b6e3a4ba48c04b172b97df137839">KMP_TIME_BLOCK</a>(name)&#160;&#160;&#160;blockTimer __BLOCKTIME__(__kmp_stats_thread_ptr-&gt;getTimer(TIMER_##name), TIMER_##name)</td></tr>
<tr class="memdesc:ga62f4b6e3a4ba48c04b172b97df137839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses specified timer (name) to time code block.  <a href="#ga62f4b6e3a4ba48c04b172b97df137839">More...</a><br/></td></tr>
<tr class="separator:ga62f4b6e3a4ba48c04b172b97df137839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7691000a7864b475046ae62fcf0536ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga7691000a7864b475046ae62fcf0536ac">KMP_COUNT_VALUE</a>(name, value)&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getTimer(TIMER_##name)-&gt;addSample(value)</td></tr>
<tr class="memdesc:ga7691000a7864b475046ae62fcf0536ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds value to specified timer (name).  <a href="#ga7691000a7864b475046ae62fcf0536ac">More...</a><br/></td></tr>
<tr class="separator:ga7691000a7864b475046ae62fcf0536ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7fa64ec62947bf0b97f3f4778dd22196"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga7fa64ec62947bf0b97f3f4778dd22196">KMP_COUNT_BLOCK</a>(name)&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getCounter(COUNTER_##name)-&gt;increment()</td></tr>
<tr class="memdesc:ga7fa64ec62947bf0b97f3f4778dd22196"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments specified counter (name).  <a href="#ga7fa64ec62947bf0b97f3f4778dd22196">More...</a><br/></td></tr>
<tr class="separator:ga7fa64ec62947bf0b97f3f4778dd22196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b26485fe6ad4f74b63e54c42fcfd875"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga8b26485fe6ad4f74b63e54c42fcfd875">KMP_START_EXPLICIT_TIMER</a>(name)&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getExplicitTimer(EXPLICIT_TIMER_##name)-&gt;start(TIMER_##name)</td></tr>
<tr class="memdesc:ga8b26485fe6ad4f74b63e54c42fcfd875"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Starts" an explicit timer which will need a corresponding <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER()</a> macro.  <a href="#ga8b26485fe6ad4f74b63e54c42fcfd875">More...</a><br/></td></tr>
<tr class="separator:ga8b26485fe6ad4f74b63e54c42fcfd875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e4f12c6bec4068d72ef9e84516ad01d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d">KMP_STOP_EXPLICIT_TIMER</a>(name)&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getExplicitTimer(EXPLICIT_TIMER_##name)-&gt;stop(TIMER_##name)</td></tr>
<tr class="memdesc:ga6e4f12c6bec4068d72ef9e84516ad01d"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Stops" an explicit timer.  <a href="#ga6e4f12c6bec4068d72ef9e84516ad01d">More...</a><br/></td></tr>
<tr class="separator:ga6e4f12c6bec4068d72ef9e84516ad01d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga568b0fdabf6bf808dcb3b42b97c7bc26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga568b0fdabf6bf808dcb3b42b97c7bc26">KMP_OUTPUT_STATS</a>(heading_string)&#160;&#160;&#160;__kmp_output_stats(heading_string)</td></tr>
<tr class="memdesc:ga568b0fdabf6bf808dcb3b42b97c7bc26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the current thread statistics and reset them.  <a href="#ga568b0fdabf6bf808dcb3b42b97c7bc26">More...</a><br/></td></tr>
<tr class="separator:ga568b0fdabf6bf808dcb3b42b97c7bc26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa30e2155ac435335965e2e615c1eaea5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#gaa30e2155ac435335965e2e615c1eaea5">KMP_RESET_STATS</a>()&#160;&#160;&#160;__kmp_reset_stats()</td></tr>
<tr class="memdesc:gaa30e2155ac435335965e2e615c1eaea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">resets all stats (counters to 0, timers to 0 elapsed ticks)  <a href="#gaa30e2155ac435335965e2e615c1eaea5">More...</a><br/></td></tr>
<tr class="separator:gaa30e2155ac435335965e2e615c1eaea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga438c2840cc2d516238ea3eb0f4c116b3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STATS__GATHERING.html#ga438c2840cc2d516238ea3eb0f4c116b3">stats_flags_e</a> { <br/>
&#160;&#160;<a class="el" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab0da7f248271bb150e59d37370c799b7">noTotal</a> = 1&lt;&lt;0, 
<a class="el" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab1b2cd818808a4ee2cc1720286fbc51d">onlyInMaster</a> = 1&lt;&lt;1, 
<a class="el" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3a1c30b5719af4df0bdc7206f20559c6dc">noUnits</a> = 1&lt;&lt;2, 
<a class="el" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3a0939773e208cb608fe78bc80a4197523">notInMaster</a> = 1&lt;&lt;3, 
<br/>
&#160;&#160;<a class="el" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3a53d50e56126850e531164b0bb1848c5e">logEvent</a> = 1&lt;&lt;4
<br/>
 }</td></tr>
<tr class="memdesc:ga438c2840cc2d516238ea3eb0f4c116b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">flags to describe the statistic (timer or counter)  <a href="group__STATS__GATHERING.html#ga438c2840cc2d516238ea3eb0f4c116b3">More...</a><br/></td></tr>
<tr class="separator:ga438c2840cc2d516238ea3eb0f4c116b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These macros support profiling the libomp library. Use &ndash;stats=on when building with build.pl to enable and then use the KMP_* macros to profile (through counts or clock ticks) libomp during execution of an OpenMP program.</p>
<h1><a class="anchor" id="sec_stats_env_vars"></a>
Environment Variables</h1>
<p>This section describes the environment variables relevant to stats-gathering in libomp</p>
<div class="fragment"><div class="line">KMP_STATS_FILE</div>
</div><!-- fragment --><p> This environment variable is set to an output filename that will be appended <em>NOT OVERWRITTEN</em> if it exists. If this environment variable is undefined, the statistics will be output to stderr</p>
<div class="fragment"><div class="line">KMP_STATS_THREADS</div>
</div><!-- fragment --><p> This environment variable indicates to print thread-specific statistics as well as aggregate statistics. Each thread's statistics will be shown as well as the collective sum of all threads. The values "true", "on", "1", "yes" will all indicate to print per thread statistics. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga7fa64ec62947bf0b97f3f4778dd22196"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_COUNT_BLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getCounter(COUNTER_##name)-&gt;increment()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments specified counter (name). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>counter name as specified under the <a class="el" href="group__STATS__GATHERING.html#ga49fb18e6ba9abac7dcf1f9a202741b66" title="Add new counters under KMP_FOREACH_COUNTER() macro in kmp_stats.h. ">KMP_FOREACH_COUNTER()</a> macro</td></tr>
  </table>
  </dd>
</dl>
<p>Use <a class="el" href="group__STATS__GATHERING.html#ga7fa64ec62947bf0b97f3f4778dd22196" title="Increments specified counter (name). ">KMP_COUNT_BLOCK(name, value)</a> macro to increment a statistics counter for the executing thread. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00653">653</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

<p>Referenced by <a class="el" href="kmp__csupport_8c_source.html#l00697">__kmpc_barrier()</a>, <a class="el" href="kmp__csupport_8c_source.html#l01111">__kmpc_critical()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00281">__kmpc_fork_call()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00385">__kmpc_fork_teams()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00733">__kmpc_master()</a>, <a class="el" href="kmp__csupport_8c_source.html#l02860">__kmpc_reduce()</a>, <a class="el" href="kmp__csupport_8c_source.html#l02663">__kmpc_reduce_nowait()</a>, and <a class="el" href="kmp__csupport_8c_source.html#l01479">__kmpc_single()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7691000a7864b475046ae62fcf0536ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_COUNT_VALUE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">value&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getTimer(TIMER_##name)-&gt;addSample(value)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds value to specified timer (name). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>timer name as specified under the KMP_FOREACH_TIMER() macro </td></tr>
    <tr><td class="paramname">value</td><td>double precision sample value to add to statistics for the timer</td></tr>
  </table>
  </dd>
</dl>
<p>Use <a class="el" href="group__STATS__GATHERING.html#ga7691000a7864b475046ae62fcf0536ac" title="Adds value to specified timer (name). ">KMP_COUNT_VALUE(name, value)</a> macro to add a particular value to a timer statistics. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00641">641</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga49fb18e6ba9abac7dcf1f9a202741b66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_FOREACH_COUNTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">macro, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">macro (OMP_PARALLEL, <a class="code" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab1b2cd818808a4ee2cc1720286fbc51d">stats_flags_e::onlyInMaster</a> | <a class="code" href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab0da7f248271bb150e59d37370c799b7">stats_flags_e::noTotal</a>, arg) \</div>
<div class="line">    macro (OMP_NESTED_PARALLEL, 0, arg)                         \</div>
<div class="line">    macro (OMP_FOR_static, 0, arg)                              \</div>
<div class="line">    macro (OMP_FOR_dynamic, 0, arg)                             \</div>
<div class="line">    macro (OMP_DISTRIBUTE, 0, arg)                              \</div>
<div class="line">    macro (OMP_BARRIER, 0, arg)                                 \</div>
<div class="line">    macro (OMP_CRITICAL,0, arg)                                 \</div>
<div class="line">    macro (OMP_SINGLE, 0, arg)                                  \</div>
<div class="line">    macro (OMP_MASTER, 0, arg)                                  \</div>
<div class="line">    macro (OMP_TEAMS, 0, arg)                                   \</div>
<div class="line">    macro (OMP_set_lock, 0, arg)                                \</div>
<div class="line">    macro (OMP_test_lock, 0, arg)                               \</div>
<div class="line">    macro (REDUCE_wait, 0, arg)                                 \</div>
<div class="line">    macro (REDUCE_nowait, 0, arg)                               \</div>
<div class="line">    macro (OMP_TASKYIELD, 0, arg)                               \</div>
<div class="line">    macro (TASK_executed, 0, arg)                               \</div>
<div class="line">    macro (TASK_cancelled, 0, arg)                              \</div>
<div class="line">    macro (TASK_stolen, 0, arg)                                 \</div>
<div class="line">    macro (LAST,0,arg)</div>
<div class="ttc" id="group__STATS__GATHERING_html_gga438c2840cc2d516238ea3eb0f4c116b3ab1b2cd818808a4ee2cc1720286fbc51d"><div class="ttname"><a href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab1b2cd818808a4ee2cc1720286fbc51d">onlyInMaster</a></div><div class="ttdoc">statistic is valid only for master </div><div class="ttdef"><b>Definition:</b> <a href="kmp__stats_8h_source.html#l00048">kmp_stats.h:48</a></div></div>
<div class="ttc" id="group__STATS__GATHERING_html_gga438c2840cc2d516238ea3eb0f4c116b3ab0da7f248271bb150e59d37370c799b7"><div class="ttname"><a href="group__STATS__GATHERING.html#gga438c2840cc2d516238ea3eb0f4c116b3ab0da7f248271bb150e59d37370c799b7">noTotal</a></div><div class="ttdoc">do not show a TOTAL_aggregation for this statistic </div><div class="ttdef"><b>Definition:</b> <a href="kmp__stats_8h_source.html#l00047">kmp_stats.h:47</a></div></div>
</div><!-- fragment -->
<p>Add new counters under <a class="el" href="group__STATS__GATHERING.html#ga49fb18e6ba9abac7dcf1f9a202741b66" title="Add new counters under KMP_FOREACH_COUNTER() macro in kmp_stats.h. ">KMP_FOREACH_COUNTER()</a> macro in <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">macro</td><td>a user defined macro that takes three arguments - macro(COUNTER_NAME, flags, arg) </td></tr>
    <tr><td class="paramname">arg</td><td>a user defined argument to send to the user defined macro</td></tr>
  </table>
  </dd>
</dl>
<p>A counter counts the occurrence of some event. Each thread accumulates its own count, at the end of execution the counts are aggregated treating each thread as a separate measurement. (Unless onlyInMaster is set, in which case there's only a single measurement). The min,mean,max are therefore the values for the threads. Adding the counter here and then putting a KMP_BLOCK_COUNTER(name) at the point you want to count is all you need to do. All of the tables and printing is generated from this macro. Format is "macro(name, flags, arg)" </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00070">70</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab0bd69c3ce378f4f7079276311e034c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_FOREACH_EXPLICIT_TIMER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">macro, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">macro(OMP_serial, 0, arg)                           \</div>
<div class="line">    macro(OMP_start_end, 0, arg)                        \</div>
<div class="line">    macro(OMP_critical, 0, arg)                         \</div>
<div class="line">    macro(OMP_single, 0, arg)                           \</div>
<div class="line">    macro(OMP_master, 0, arg)                           \</div>
<div class="line">    KMP_FOREACH_EXPLICIT_DEVELOPER_TIMER(macro,arg)     \</div>
<div class="line">    macro(LAST, 0, arg)</div>
</div><!-- fragment -->
<p>Add new explicit timers under <a class="el" href="group__STATS__GATHERING.html#gab0bd69c3ce378f4f7079276311e034c0" title="Add new explicit timers under KMP_FOREACH_EXPLICIT_TIMER() macro. ">KMP_FOREACH_EXPLICIT_TIMER()</a> macro. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">macro</td><td>a user defined macro that takes three arguments - macro(TIMER_NAME, flags, arg) </td></tr>
    <tr><td class="paramname">arg</td><td>a user defined argument to send to the user defined macro</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>YOU MUST HAVE THE SAME NAMED TIMER UNDER KMP_FOREACH_TIMER() OR ELSE BAD THINGS WILL HAPPEN!</dd></dl>
<p>Explicit timers are ones where we need to allocate a timer itself (as well as the accumulated timing statistics). We allocate these on a per-thread basis, and explicitly start and stop them. Block timers just allocate the timer itself on the stack, and use the destructor to notice block exit; they don't need to be defined here. The name here should be the same as that of a timer above. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00200">200</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga568b0fdabf6bf808dcb3b42b97c7bc26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_OUTPUT_STATS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">heading_string</td><td>)</td>
          <td>&#160;&#160;&#160;__kmp_output_stats(heading_string)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs the current thread statistics and reset them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heading_string</td><td>heading put above the final stats output</td></tr>
  </table>
  </dd>
</dl>
<p>Explicitly stops all timers and outputs all stats. Environment variable, <code>OMPTB_STATSFILE=filename</code>, can be used to output the stats to a filename instead of stderr Environment variable, <code>OMPTB_STATSTHREADS=true|undefined</code>, can be used to output thread specific stats For now the <code>OMPTB_STATSTHREADS</code> environment variable can either be defined with any value, which will print out thread specific stats, or it can be undefined (not specified in the environment) and thread specific stats won't be printed It should be noted that all statistics are reset when this macro is called. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00698">698</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa30e2155ac435335965e2e615c1eaea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_RESET_STATS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;__kmp_reset_stats()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>resets all stats (counters to 0, timers to 0 elapsed ticks) </p>
<p>Reset all stats for all threads. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00708">708</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8b26485fe6ad4f74b63e54c42fcfd875"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_START_EXPLICIT_TIMER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getExplicitTimer(EXPLICIT_TIMER_##name)-&gt;start(TIMER_##name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>"Starts" an explicit timer which will need a corresponding <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER()</a> macro. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>explicit timer name as specified under the <a class="el" href="group__STATS__GATHERING.html#gab0bd69c3ce378f4f7079276311e034c0" title="Add new explicit timers under KMP_FOREACH_EXPLICIT_TIMER() macro. ">KMP_FOREACH_EXPLICIT_TIMER()</a> macro</td></tr>
  </table>
  </dd>
</dl>
<p>Use to start a timer. This will need a corresponding <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER()</a> macro to stop the timer unlike the <a class="el" href="group__STATS__GATHERING.html#ga62f4b6e3a4ba48c04b172b97df137839" title="Uses specified timer (name) to time code block. ">KMP_TIME_BLOCK(name)</a> macro which has an implicit stopping macro at the end of the code block. All explicit timers are stopped at library exit time before the final statistics are outputted. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00667">667</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

<p>Referenced by <a class="el" href="kmp__csupport_8c_source.html#l01111">__kmpc_critical()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00281">__kmpc_fork_call()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00733">__kmpc_master()</a>, and <a class="el" href="kmp__csupport_8c_source.html#l01479">__kmpc_single()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6e4f12c6bec4068d72ef9e84516ad01d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_STOP_EXPLICIT_TIMER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;__kmp_stats_thread_ptr-&gt;getExplicitTimer(EXPLICIT_TIMER_##name)-&gt;stop(TIMER_##name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>"Stops" an explicit timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>explicit timer name as specified under the <a class="el" href="group__STATS__GATHERING.html#gab0bd69c3ce378f4f7079276311e034c0" title="Add new explicit timers under KMP_FOREACH_EXPLICIT_TIMER() macro. ">KMP_FOREACH_EXPLICIT_TIMER()</a> macro</td></tr>
  </table>
  </dd>
</dl>
<p>Use <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER(name)</a> to stop a timer. When this is done, the time between the last <a class="el" href="group__STATS__GATHERING.html#ga8b26485fe6ad4f74b63e54c42fcfd875" title="&quot;Starts&quot; an explicit timer which will need a corresponding KMP_STOP_EXPLICIT_TIMER() macro...">KMP_START_EXPLICIT_TIMER(name)</a> and this <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER(name)</a> will be added to the timer's stat value. The timer will then be reset. After the <a class="el" href="group__STATS__GATHERING.html#ga6e4f12c6bec4068d72ef9e84516ad01d" title="&quot;Stops&quot; an explicit timer. ">KMP_STOP_EXPLICIT_TIMER(name)</a> macro is called, another call to <a class="el" href="group__STATS__GATHERING.html#ga8b26485fe6ad4f74b63e54c42fcfd875" title="&quot;Starts&quot; an explicit timer which will need a corresponding KMP_STOP_EXPLICIT_TIMER() macro...">KMP_START_EXPLICIT_TIMER(name)</a> will start the timer once again. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00681">681</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

<p>Referenced by <a class="el" href="kmp__csupport_8c_source.html#l01287">__kmpc_end_critical()</a>, <a class="el" href="kmp__csupport_8c_source.html#l00789">__kmpc_end_master()</a>, <a class="el" href="kmp__csupport_8c_source.html#l01526">__kmpc_end_single()</a>, and <a class="el" href="kmp__csupport_8c_source.html#l00281">__kmpc_fork_call()</a>.</p>

</div>
</div>
<a class="anchor" id="ga62f4b6e3a4ba48c04b172b97df137839"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KMP_TIME_BLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;blockTimer __BLOCKTIME__(__kmp_stats_thread_ptr-&gt;getTimer(TIMER_##name), TIMER_##name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses specified timer (name) to time code block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>timer name as specified under the KMP_FOREACH_TIMER() macro</td></tr>
  </table>
  </dd>
</dl>
<p>Use <a class="el" href="group__STATS__GATHERING.html#ga62f4b6e3a4ba48c04b172b97df137839" title="Uses specified timer (name) to time code block. ">KMP_TIME_BLOCK(name)</a> macro to time a code block. This will record the time taken in the block and use the destructor to stop the timer. Convenient! With this definition you can't have more than one KMP_TIME_BLOCK in the same code block. I don't think that's a problem. </p>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00628">628</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

<p>Referenced by <a class="el" href="kmp__csupport_8c_source.html#l00697">__kmpc_barrier()</a>, and <a class="el" href="kmp__csupport_8c_source.html#l01111">__kmpc_critical()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga438c2840cc2d516238ea3eb0f4c116b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__STATS__GATHERING.html#ga438c2840cc2d516238ea3eb0f4c116b3">stats_flags_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>flags to describe the statistic (timer or counter) </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga438c2840cc2d516238ea3eb0f4c116b3ab0da7f248271bb150e59d37370c799b7"></a>noTotal</em>&#160;</td><td class="fielddoc">
<p>do not show a TOTAL_aggregation for this statistic </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga438c2840cc2d516238ea3eb0f4c116b3ab1b2cd818808a4ee2cc1720286fbc51d"></a>onlyInMaster</em>&#160;</td><td class="fielddoc">
<p>statistic is valid only for master </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga438c2840cc2d516238ea3eb0f4c116b3a1c30b5719af4df0bdc7206f20559c6dc"></a>noUnits</em>&#160;</td><td class="fielddoc">
<p>statistic doesn't need units printed next to it in output </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga438c2840cc2d516238ea3eb0f4c116b3a0939773e208cb608fe78bc80a4197523"></a>notInMaster</em>&#160;</td><td class="fielddoc">
<p>statistic is valid only for non-master threads </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga438c2840cc2d516238ea3eb0f4c116b3a53d50e56126850e531164b0bb1848c5e"></a>logEvent</em>&#160;</td><td class="fielddoc">
<p>statistic can be logged on the event timeline when KMP_STATS_EVENTS is on (valid only for timers) </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="kmp__stats_8h_source.html#l00046">46</a> of file <a class="el" href="kmp__stats_8h_source.html">kmp_stats.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 24 2016 21:30:30 for LLVM OpenMP* Runtime Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
