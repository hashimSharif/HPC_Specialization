\hypertarget{group__THREADPRIVATE}{\section{Thread private data support}
\label{group__THREADPRIVATE}\index{Thread private data support@{Thread private data support}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__THREADPRIVATE_ga1453eca6136fd77e5de88ea0e78cc7a4}{\-\_\-\-\_\-kmpc\-\_\-copyprivate} (\hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc, kmp\-\_\-int32 gtid, size\-\_\-t cpy\-\_\-size, void $\ast$cpy\-\_\-data, void($\ast$cpy\-\_\-func)(void $\ast$, void $\ast$), kmp\-\_\-int32 didit)
\item 
void \hyperlink{group__THREADPRIVATE_ga120efa08eb51f45664477d30eff31916}{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register} (\hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc, void $\ast$data, \hyperlink{group__THREADPRIVATE_ga0c2f8074a8474eee42bc96a4bdc7679a}{kmpc\-\_\-ctor} ctor, \hyperlink{group__THREADPRIVATE_gab6148c019e88c8853596bf5f516373b4}{kmpc\-\_\-cctor} cctor, \hyperlink{group__THREADPRIVATE_gad8268ac7d007fa1c3351da682c487c0f}{kmpc\-\_\-dtor} dtor)
\item 
void $\ast$ \hyperlink{group__THREADPRIVATE_gab4aa3dff2b1b55b1abb002ef69c7efe7}{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached} (\hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc, kmp\-\_\-int32 global\-\_\-tid, void $\ast$data, size\-\_\-t size, void $\ast$$\ast$$\ast$cache)
\item 
void \hyperlink{group__THREADPRIVATE_gaec6e88892a1b0b62287df5173a7f0336}{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec} (\hyperlink{group__BASIC__TYPES_ga690fda6b92f039a72db263c6b4394ddb}{ident\-\_\-t} $\ast$loc, void $\ast$data, \hyperlink{group__THREADPRIVATE_gac1f868aef7d531d34b91eaa57e339f21}{kmpc\-\_\-ctor\-\_\-vec} ctor, \hyperlink{group__THREADPRIVATE_gaf9503cacabf6cf90ed34f2727fc480bc}{kmpc\-\_\-cctor\-\_\-vec} cctor, \hyperlink{group__THREADPRIVATE_gab7035b42d465074b31195534efb37e3b}{kmpc\-\_\-dtor\-\_\-vec} dtor, size\-\_\-t vector\-\_\-length)
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
typedef void $\ast$($\ast$ \hyperlink{group__THREADPRIVATE_ga0c2f8074a8474eee42bc96a4bdc7679a}{kmpc\-\_\-ctor} )(void $\ast$)
\item 
typedef void($\ast$ \hyperlink{group__THREADPRIVATE_gad8268ac7d007fa1c3351da682c487c0f}{kmpc\-\_\-dtor} )(void $\ast$)
\item 
typedef void $\ast$($\ast$ \hyperlink{group__THREADPRIVATE_gab6148c019e88c8853596bf5f516373b4}{kmpc\-\_\-cctor} )(void $\ast$, void $\ast$)
\item 
typedef void $\ast$($\ast$ \hyperlink{group__THREADPRIVATE_gac1f868aef7d531d34b91eaa57e339f21}{kmpc\-\_\-ctor\-\_\-vec} )(void $\ast$, size\-\_\-t)
\item 
typedef void($\ast$ \hyperlink{group__THREADPRIVATE_gab7035b42d465074b31195534efb37e3b}{kmpc\-\_\-dtor\-\_\-vec} )(void $\ast$, size\-\_\-t)
\item 
typedef void $\ast$($\ast$ \hyperlink{group__THREADPRIVATE_gaf9503cacabf6cf90ed34f2727fc480bc}{kmpc\-\_\-cctor\-\_\-vec} )(void $\ast$, void $\ast$, size\-\_\-t)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
These functions support copyin/out and thread private data. 

\subsection{Typedef Documentation}
\hypertarget{group__THREADPRIVATE_gab6148c019e88c8853596bf5f516373b4}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-cctor@{kmpc\-\_\-cctor}}
\index{kmpc\-\_\-cctor@{kmpc\-\_\-cctor}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-cctor}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ kmpc\-\_\-cctor)(void $\ast$, void $\ast$)}}\label{group__THREADPRIVATE_gab6148c019e88c8853596bf5f516373b4}
Pointer to an alternate constructor. The first argument is the {\ttfamily this} pointer. 

Definition at line 1440 of file kmp.\-h.

\hypertarget{group__THREADPRIVATE_gaf9503cacabf6cf90ed34f2727fc480bc}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-cctor\-\_\-vec@{kmpc\-\_\-cctor\-\_\-vec}}
\index{kmpc\-\_\-cctor\-\_\-vec@{kmpc\-\_\-cctor\-\_\-vec}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-cctor\-\_\-vec}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ kmpc\-\_\-cctor\-\_\-vec)(void $\ast$, void $\ast$, size\-\_\-t)}}\label{group__THREADPRIVATE_gaf9503cacabf6cf90ed34f2727fc480bc}
Array constructor. First argument is the {\ttfamily this} pointer Third argument the number of array elements. 

Definition at line 1462 of file kmp.\-h.

\hypertarget{group__THREADPRIVATE_ga0c2f8074a8474eee42bc96a4bdc7679a}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-ctor@{kmpc\-\_\-ctor}}
\index{kmpc\-\_\-ctor@{kmpc\-\_\-ctor}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-ctor}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ kmpc\-\_\-ctor)(void $\ast$)}}\label{group__THREADPRIVATE_ga0c2f8074a8474eee42bc96a4bdc7679a}
Pointer to the constructor function. The first argument is the {\ttfamily this} pointer 

Definition at line 1429 of file kmp.\-h.

\hypertarget{group__THREADPRIVATE_gac1f868aef7d531d34b91eaa57e339f21}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-ctor\-\_\-vec@{kmpc\-\_\-ctor\-\_\-vec}}
\index{kmpc\-\_\-ctor\-\_\-vec@{kmpc\-\_\-ctor\-\_\-vec}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-ctor\-\_\-vec}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ kmpc\-\_\-ctor\-\_\-vec)(void $\ast$, size\-\_\-t)}}\label{group__THREADPRIVATE_gac1f868aef7d531d34b91eaa57e339f21}
Array constructor. First argument is the {\ttfamily this} pointer Second argument the number of array elements. 

Definition at line 1450 of file kmp.\-h.

\hypertarget{group__THREADPRIVATE_gad8268ac7d007fa1c3351da682c487c0f}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-dtor@{kmpc\-\_\-dtor}}
\index{kmpc\-\_\-dtor@{kmpc\-\_\-dtor}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-dtor}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ kmpc\-\_\-dtor)(void $\ast$)}}\label{group__THREADPRIVATE_gad8268ac7d007fa1c3351da682c487c0f}
Pointer to the destructor function. The first argument is the {\ttfamily this} pointer 

Definition at line 1435 of file kmp.\-h.

\hypertarget{group__THREADPRIVATE_gab7035b42d465074b31195534efb37e3b}{\index{Thread private data support@{Thread private data support}!kmpc\-\_\-dtor\-\_\-vec@{kmpc\-\_\-dtor\-\_\-vec}}
\index{kmpc\-\_\-dtor\-\_\-vec@{kmpc\-\_\-dtor\-\_\-vec}!Thread private data support@{Thread private data support}}
\subsubsection[{kmpc\-\_\-dtor\-\_\-vec}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ kmpc\-\_\-dtor\-\_\-vec)(void $\ast$, size\-\_\-t)}}\label{group__THREADPRIVATE_gab7035b42d465074b31195534efb37e3b}
Pointer to the array destructor function. The first argument is the {\ttfamily this} pointer Second argument the number of array elements. 

Definition at line 1456 of file kmp.\-h.



\subsection{Function Documentation}
\hypertarget{group__THREADPRIVATE_ga1453eca6136fd77e5de88ea0e78cc7a4}{\index{Thread private data support@{Thread private data support}!\-\_\-\-\_\-kmpc\-\_\-copyprivate@{\-\_\-\-\_\-kmpc\-\_\-copyprivate}}
\index{\-\_\-\-\_\-kmpc\-\_\-copyprivate@{\-\_\-\-\_\-kmpc\-\_\-copyprivate}!Thread private data support@{Thread private data support}}
\subsubsection[{\-\_\-\-\_\-kmpc\-\_\-copyprivate}]{\setlength{\rightskip}{0pt plus 5cm}void \-\_\-\-\_\-kmpc\-\_\-copyprivate (
\begin{DoxyParamCaption}
\item[{{\bf ident\-\_\-t} $\ast$}]{loc, }
\item[{kmp\-\_\-int32}]{gtid, }
\item[{size\-\_\-t}]{cpy\-\_\-size, }
\item[{void $\ast$}]{cpy\-\_\-data, }
\item[{void($\ast$)(void $\ast$, void $\ast$)}]{cpy\-\_\-func, }
\item[{kmp\-\_\-int32}]{didit}
\end{DoxyParamCaption}
)}}\label{group__THREADPRIVATE_ga1453eca6136fd77e5de88ea0e78cc7a4}

\begin{DoxyParams}{Parameters}
{\em loc} & source location information \\
\hline
{\em gtid} & global thread number \\
\hline
{\em cpy\-\_\-size} & size of the cpy\-\_\-data buffer \\
\hline
{\em cpy\-\_\-data} & pointer to data to be copied \\
\hline
{\em cpy\-\_\-func} & helper function to call for copying data \\
\hline
{\em didit} & flag variable\-: 1=single thread; 0=not single thread\\
\hline
\end{DoxyParams}
\-\_\-\-\_\-kmpc\-\_\-copyprivate implements the interface for the private data broadcast needed for the copyprivate clause associated with a single region in an Open\-M\-P$^{\mbox{$\ast$}}$  program (both C and Fortran). All threads participating in the parallel region call this routine. One of the threads (called the single thread) should have the {\ttfamily didit} variable set to 1 and all other threads should have that variable set to 0. All threads pass a pointer to a data buffer (cpy\-\_\-data) that they have built.

The Open\-M\-P specification forbids the use of nowait on the single region when a copyprivate clause is present. However, \hyperlink{group__THREADPRIVATE_ga1453eca6136fd77e5de88ea0e78cc7a4}{\-\_\-\-\_\-kmpc\-\_\-copyprivate} implements a barrier internally to avoid race conditions, so the code generation for the single region should avoid generating a barrier after the call to \hyperlink{group__THREADPRIVATE_ga1453eca6136fd77e5de88ea0e78cc7a4}{\-\_\-\-\_\-kmpc\-\_\-copyprivate}.

The {\ttfamily gtid} parameter is the global thread id for the current thread. The {\ttfamily loc} parameter is a pointer to source location information.

Internal implementation\-: The single thread will first copy its descriptor address (cpy\-\_\-data) to a team-\/private location, then the other threads will each call the function pointed to by the parameter cpy\-\_\-func, which carries out the copy by copying the data using the cpy\-\_\-data buffer.

The cpy\-\_\-func routine used for the copy and the contents of the data area defined by cpy\-\_\-data and cpy\-\_\-size may be built in any fashion that will allow the copy to be done. For instance, the cpy\-\_\-data buffer can hold the actual data to be copied or it may hold a list of pointers to the data. The cpy\-\_\-func routine must interpret the cpy\-\_\-data buffer appropriately.

The interface to cpy\-\_\-func is as follows\-: 
\begin{DoxyCode}
\textcolor{keywordtype}{void} cpy\_func( \textcolor{keywordtype}{void} *destination, \textcolor{keywordtype}{void} *source )
\end{DoxyCode}
 where void $\ast$destination is the cpy\-\_\-data pointer for the thread being copied to and void $\ast$source is the cpy\-\_\-data pointer for the thread being copied from. 

Definition at line 1764 of file kmp\-\_\-csupport.\-c.

\hypertarget{group__THREADPRIVATE_gab4aa3dff2b1b55b1abb002ef69c7efe7}{\index{Thread private data support@{Thread private data support}!\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached}}
\index{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached}!Thread private data support@{Thread private data support}}
\subsubsection[{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ \-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-cached (
\begin{DoxyParamCaption}
\item[{{\bf ident\-\_\-t} $\ast$}]{loc, }
\item[{kmp\-\_\-int32}]{global\-\_\-tid, }
\item[{void $\ast$}]{data, }
\item[{size\-\_\-t}]{size, }
\item[{void $\ast$$\ast$$\ast$}]{cache}
\end{DoxyParamCaption}
)}}\label{group__THREADPRIVATE_gab4aa3dff2b1b55b1abb002ef69c7efe7}

\begin{DoxyParams}{Parameters}
{\em loc} & source location information \\
\hline
{\em global\-\_\-tid} & global thread number \\
\hline
{\em data} & pointer to data to privatize \\
\hline
{\em size} & size of data to privatize \\
\hline
{\em cache} & pointer to cache \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to private storage
\end{DoxyReturn}
Allocate private storage for threadprivate data. 

Definition at line 630 of file kmp\-\_\-threadprivate.\-c.

\hypertarget{group__THREADPRIVATE_ga120efa08eb51f45664477d30eff31916}{\index{Thread private data support@{Thread private data support}!\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register}}
\index{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register}!Thread private data support@{Thread private data support}}
\subsubsection[{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register}]{\setlength{\rightskip}{0pt plus 5cm}void \-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register (
\begin{DoxyParamCaption}
\item[{{\bf ident\-\_\-t} $\ast$}]{loc, }
\item[{void $\ast$}]{data, }
\item[{{\bf kmpc\-\_\-ctor}}]{ctor, }
\item[{{\bf kmpc\-\_\-cctor}}]{cctor, }
\item[{{\bf kmpc\-\_\-dtor}}]{dtor}
\end{DoxyParamCaption}
)}}\label{group__THREADPRIVATE_ga120efa08eb51f45664477d30eff31916}

\begin{DoxyParams}{Parameters}
{\em loc} & source location information \\
\hline
{\em data} & pointer to data being privatized \\
\hline
{\em ctor} & pointer to constructor function for data \\
\hline
{\em cctor} & pointer to copy constructor function for data \\
\hline
{\em dtor} & pointer to destructor function for data\\
\hline
\end{DoxyParams}
Register constructors and destructors for thread private data. This function is called when executing in parallel, when we know the thread id. 

Definition at line 532 of file kmp\-\_\-threadprivate.\-c.

\hypertarget{group__THREADPRIVATE_gaec6e88892a1b0b62287df5173a7f0336}{\index{Thread private data support@{Thread private data support}!\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec}}
\index{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec@{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec}!Thread private data support@{Thread private data support}}
\subsubsection[{\-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec}]{\setlength{\rightskip}{0pt plus 5cm}void \-\_\-\-\_\-kmpc\-\_\-threadprivate\-\_\-register\-\_\-vec (
\begin{DoxyParamCaption}
\item[{{\bf ident\-\_\-t} $\ast$}]{loc, }
\item[{void $\ast$}]{data, }
\item[{{\bf kmpc\-\_\-ctor\-\_\-vec}}]{ctor, }
\item[{{\bf kmpc\-\_\-cctor\-\_\-vec}}]{cctor, }
\item[{{\bf kmpc\-\_\-dtor\-\_\-vec}}]{dtor, }
\item[{size\-\_\-t}]{vector\-\_\-length}
\end{DoxyParamCaption}
)}}\label{group__THREADPRIVATE_gaec6e88892a1b0b62287df5173a7f0336}

\begin{DoxyParams}{Parameters}
{\em loc} & source location information \\
\hline
{\em data} & pointer to data being privatized \\
\hline
{\em ctor} & pointer to constructor function for data \\
\hline
{\em cctor} & pointer to copy constructor function for data \\
\hline
{\em dtor} & pointer to destructor function for data \\
\hline
{\em vector\-\_\-length} & length of the vector (bytes or elements?) Register vector constructors and destructors for thread private data. \\
\hline
\end{DoxyParams}


Definition at line 699 of file kmp\-\_\-threadprivate.\-c.

